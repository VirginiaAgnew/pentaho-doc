<content type="text/html" title="Set Up Pentaho to Connect to an Amazon EMR Cluster">
  <head>
    <link type="text/css" rel="stylesheet" href="http://help.pentaho.com/@cdn/deki/syntax2/out/shCore.min.css" />
    <link type="text/css" rel="stylesheet" href="http://help.pentaho.com/@cdn/deki/syntax2/out/shThemeCedar.min.css" />
    <script type="text/javascript" src="http://help.pentaho.com/@cdn/deki/syntax2/out/shCore.min.js"></script>
    <script type="text/javascript" src="http://help.pentaho.com/@cdn/deki/syntax2/out/shBrushXml.min.js"></script>
    <script type="text/javascript">
      /*<![CDATA[*/
      SyntaxHighlighter.all(); /*]]>*/
    </script>
  </head>
  <body>
    <div class="pentaho-overview-hidden">
      <div id="section_1" class="mt-page-section"><span id="Overview"></span> 
        <h2 class="editable">Overview</h2>
        <p><span class="mt-color-000000">These instructions explain how to configure Pentaho's Amazon Elastic MapReduce (EMR) shim so Pentaho can connect to a working Amazon EMR cluster.</span> </p>
      </div>
    </div>
    <div id="section_2" class="mt-page-section"><span id="Before_You_Begin"></span> 
      <h2 class="editable">Before You Begin</h2>
      <p>Before you begin, you'll need to do a few things.</p>
      <ol>
        <li><strong>Verify Support</strong> 
          <br /> Check the
          <a title="Components Reference" rel="internal" href="http://help.pentaho.com/Documentation/7.0/0D0/160/000#Big_Data_Sources">Component Reference </a> to verify that your Pentaho version supports your version of the&nbsp;<span class="mt-color-000000">Amazon </span> EMR cluster.
          <br /> &nbsp;</li>
        <li><strong>Set Up an Amazon EMR cluster</strong> 
          <br /> Pentaho can connect to an <span class="mt-color-000000">Amazon </span> EMR cluster:
          <ol>
            <li>Configure an Amazon EC2 cluster.&nbsp; See
              <a class="link-https" style="background-color: rgb(255, 255, 255);" title="https://aws.amazon.com/documentation/elastic-mapreduce/" rel="external nofollow" href="https://aws.amazon.com/documentation/elastic-mapreduce/"
              target="_blank">Amazon's documentation</a>  if you need help.</li>
            <li>Install any required services and service client tools.</li>
            <li>Test the cluster.
              <br /> &nbsp;</li>
          </ol>
        </li>
        <li><strong>Install PDI on <span class="mt-color-000000">Amazon </span> EMR</strong> 
          <br /> Install PDI on an Amazon EC2 instance that is within the same Amazon Virtual Private Cloud (VPC) as the <span class="mt-color-000000">Amazon </span> EMR cluster.
          <br /> &nbsp;</li>
        <li><strong>Get Connection Information</strong> 
          <br /> Get the connection information for the cluster and services that you will use from your Hadoop administrator, or from a cluster management tool. You'll also need to
          <a title="Connection and Access Information" rel="internal" href="http://help.pentaho.com/Documentation/7.0/0L0/040/025/010">supply some of this information to users</a>  once you are finished.&nbsp;
          <br /> &nbsp;</li>
        <li><strong>Add a YARN User to the Superuser Group</strong> 
          <br /> Add the YARN user on the cluster to the group defined by <span class="filepath style-wrap">dfs.permissions.superusergroup</span>  property. The <span class="filepath style-wrap">dfs.permissions.superusergroup</span>  property can be found in
          <span class="filepath style-wrap">hdfs-site.xml</span>  file on your cluster or in the cluster management application.
          <br /> &nbsp;</li>
        <li><strong>Review the Version-Specific Notes Section</strong> 
          <br /> Read the Version-Specific Notes section to review special configuration instructions for your version of <span class="mt-color-000000">Amazon </span> EMR.</li>
      </ol>
      <p class="pentaho-note">There are no Pentaho-specific edits that need to be made to the *-site.xml configuration files on the cluster.</p>
    </div>
    <div id="section_3" class="mt-page-section"><span id="Configure_Pentaho_Component_Shims"></span> 
      <h2 class="editable">Configure Pentaho Component Shims</h2>
      <p style="visibility: visible;">You must configure the shim in <em>each </em> of the following Pentaho components, on <em>each </em> computer from which Pentaho will be used to connect to the cluster:</p>
      <ul class="pentaho-list-unordered">
        <li>Spoon (PDI Client)</li>
        <li>Pentaho Server</li>
        <li>Pentaho Report Designer (PRD)</li>
        <li>Pentaho Metadata Editor (PME)</li>
      </ul>
      <p style="visibility: visible;">As a best practice, configure the shim in Spoon <em>first</em> .&nbsp; Spoon has features that will help you test your configuration.&nbsp; Then copy the tested Spoon configuration files to other components, making changes if necessary.&nbsp;</p>
      <p style="visibility: visible;">You can also opt to go through these instructions for&nbsp;each Pentaho component, and not copy the shim files from Spoon.&nbsp; If you do not plan to connect to the cluster from Spoon, you can configure the shim in another component first instead.</p>
      <div id="section_4" class="mt-page-section"><span id="Step_1:_Locate_the__Pentaho_Big_Data_Plugin_and_Shim_Directories"></span> 
        <h3 class="editable">Step 1: Locate the&nbsp; Pentaho Big Data Plugin and&nbsp;Shim Directories</h3>
        <p>Shims and other parts of the Pentaho Adaptive Big Data Layer are in the Pentaho Big Data Plugin directory. The path to this directory differs by component. You need to know the locations of this directory, for each component, to complete shim
          configuration and testing tasks.</p>
        <p class="pentaho-note"><span class="filepath style-wrap"><pentaho home></span>  is the directory where Pentaho is installed.</p>
        <table border="1" cellpadding="1" cellspacing="1" class="pentaho-table" style="width: 1225px; table-layout: fixed;" title="Pentaho Table">
          <tbody>
            <tr>
              <th style="width: 170px;">Components</th>
              <th style="width: 1043px;">Location of Pentaho Big Data Plugin Directory</th>
            </tr>
            <tr>
              <td style="width: 170px;">Spoon</td>
              <td style="width: 1043px;"><span class="filepath style-wrap"><pentaho home>/design-tools/data-integration/plugins/pentaho-big-data-plugin</span> </td>
            </tr>
            <tr>
              <td>Pentaho Server</td>
              <td style="width: 1043px;"><span class="filepath style-wrap"><pentaho home>/server/pentaho-server/pentaho-solutions/system/kettle/plugins/pentaho-big-data-plugin</span> </td>
            </tr>
            <tr>
              <td style="width: 170px;">Pentaho Report Designer</td>
              <td style="width: 1043px;"><span class="filepath style-wrap"><pentaho home>/design-tools/report-designer/plugins/pentaho-big-data-plugin</span> </td>
            </tr>
            <tr>
              <td style="width: 170px;">Pentaho Metadata Editor</td>
              <td style="width: 1043px;"><span class="filepath style-wrap"><pentaho home>/design-tools/metadata-editor/plugins/pentaho-big-data-plugin</span> </td>
            </tr>
          </tbody>
        </table>
        <p>Shims are located in the <span class="filepath style-wrap">pentaho-big-data-plugin/hadoop-configurations </span> directory.&nbsp; Shim directory names consist of a&nbsp;three or four letter Hadoop Distribution abbreviation&nbsp;followed by the
          Hadoop Distribution's version number.&nbsp; The version number does not contain a decimal point.&nbsp; For example, the shim directory named <strong>cdh54 </strong> is the shim for the CDH (Cloudera&nbsp;Distribution for Hadoop), version 5.4.&nbsp;
          Here is a list of the shim directory abbreviations.</p>
        <table border="1" cellpadding="1" cellspacing="1" class="pentaho-table" height="146" style="table-layout: fixed; width: 642px;" title="Pentaho Table" width="645">
          <tbody>
            <tr>
              <th style="width: 171px;">Abbreviation</th>
              <th style="width: 447px;">Shim</th>
            </tr>
            <tr>
              <td style="width: 171px;">cdh</td>
              <td style="width: 447px;">Cloudera's Distribution of Apache Hadoop</td>
            </tr>
            <tr>
              <td style="width: 171px;">emr</td>
              <td style="width: 447px;">Amazon Elastic Map Reduce</td>
            </tr>
            <tr>
              <td style="width: 171px;">hdp</td>
              <td style="width: 447px;">Hortonworks Data Platform</td>
            </tr>
            <tr>
              <td style="width: 171px;">mapr</td>
              <td style="width: 447px;">MapR</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div id="section_5" class="mt-page-section"><span id="Step_2:_Select_the_Correct_Shim"></span> 
        <h3 class="editable">Step 2: Select the Correct Shim</h3>
        <p>Although Pentaho often supports one or more versions of a Hadoop&nbsp;distribution, the download of the Pentaho Suite only contains the latest, supported, Pentaho-certified version of the shim.&nbsp;The other supported versions of shims can be
          downloaded from&nbsp;the
          <a title="Help and Support Resources" rel="internal" href="http://help.pentaho.com/Documentation/6.0/0B0/Get_Help_and_Support/001">Pentaho&nbsp;Customer Support Portal</a> .&nbsp;</p>
        <ol class="pentaho-list-ordered">
          <li>Navigate to the <span class="filepath style-wrap">pentaho-big-data-plugin/hadoop-configurations</span>  directory.&nbsp; Shim directories are listed there.&nbsp;</li>
          <li>If the shim you want to use is already there, you can go to Step 3: Copy the Configuration Files from Cluster to Shim.</li>
          <li>Go to the&nbsp;Pentaho Customer Support Portal Knowledge Base's&nbsp;
            <a class="link-https" title="https://pentaho.zendesk.com/forums/20413716-Downloads" rel="external nofollow" href="https://pentaho.zendesk.com/forums/20413716-Downloads" target="_blank">Downloads </a> page. You are prompted to log in if you have not done so already.</li>
        </ol>
        <p>&nbsp;
          <a class="thumb" title="knowledge_base_downloads.png" rel="internal" href="http://help.pentaho.com/@api/deki/files/6964/knowledge_base_downloads.png">
            <img alt="knowledge_base_downloads.png" class="internal default" style="width: 350px; height: 227px;" width="350px" height="227px" src="http://help.pentaho.com/@api/deki/files/6964/knowledge_base_downloads.png?size=bestfit&amp;width=350&amp;height=227&amp;revision=1"
            />
          </a> 
        </p>
        <ol class="pentaho-list-ordered" start="4">
          <li>Enter the name of the shim you want in the search box. &nbsp;Select the shim from the search results.</li>
          <li>Read the instructions, then download the shim. &nbsp;You might need to scroll down to see the download link.</li>
          <li>Unzip the downloaded shim package into the <span class="filepath style-wrap">pentaho-big-data-plugin/hadoop-configurations</span>  directory.</li>
        </ol>
      </div>
      <div id="section_6" class="mt-page-section"><span id="Step_3:_Copy_the_Configuration_Files_from_Cluster_to_Shim"></span> 
        <h3 class="editable">Step 3: Copy the Configuration Files from Cluster to Shim</h3>
        <p>Copying configuration files from the cluster to the shim keeps the configuration files in sync and reduces troubleshooting errors.</p>
        <ol class="pentaho-list-ordered">
          <li>Back up the existing Amazon EMR shim files in the <span class="filepath style-wrap">pentaho-big-data-plugin/hadoop-configurations/emrxx</span>  directory.&nbsp;</li>
          <li>Copy the following configuration files from the EMR cluster to <span class="filepath style-wrap">pentaho-big-data-plugin/hadoop-configurations/emrxx&nbsp;</span> (overwrite the existing files):</li>
        </ol>
        <ul class="pentaho-list-unordered">
          <li><span class="filepath style-wrap">core-site.xml</span> </li>
          <li><span class="filepath style-wrap">hdfs-site.xml</span> </li>
          <li><span class="filepath style-wrap">emrfs-site.xml</span> </li>
          <li><span class="filepath style-wrap">httpfs-site.xml</span> </li>
          <li><span class="filepath style-wrap">mapred-site.xml</span> </li>
          <li><span class="filepath style-wrap">yarn-site.xml</span> </li>
        </ul>
      </div>
      <div id="section_7" class="mt-page-section"><span id="Step_4:_Edit_the_Shim_Configuration_Files"></span> 
        <h3 class="editable">Step 4: Edit the Shim Configuration Files</h3>
        <p>You need to verify or change settings in authentication, Oozie, Hive, MapReduce, and YARN in these shim configuration files:</p>
        <ul class="pentaho-list-unordered">
          <li><span class="filepath style-wrap">core-site.xml</span> </li>
          <li><span class="filepath style-wrap">mapred-site.xml</span> </li>
        </ul>
        <div id="section_8" class="mt-page-section"><span id="Verify_or_Edit_core-site.xml"></span> 
          <h4 class="editable">Verify or Edit core-site.xml</h4>
          <p class="pentaho-note">If you plan to run MapReduce jobs on an <span class="mt-color-000000">Amazon </span> EMR cluster, make sure you have read, write, and execute access to the S3 Buffer directories specified in the core-site.xml file on the EMR cluster.</p>
          <p>Edit the <code>core-site.xml</code> file to add information about your AWS Access Key ID and Access key.&nbsp; You will also need to indicate your LZO compression setting.</p>
          <ol class="pentaho-list-ordered">
            <li>Navigate to the <span class="filepath style-wrap">pentaho-big-data-plugin/hadoop-configurations/emrxx</span>  directory and open the <code>core-site</code>.xml file.</li>
            <li>Add the following values:</li>
          </ol>
          <table class="pentaho-table" title="Pentaho Table">
            <tbody>
              <tr>
                <th class="confluenceTh">Parameter</th>
                <th class="confluenceTh">Values</th>
              </tr>
              <tr>
                <td class="confluenceTd">fs.s3.awsAccessKeyId</td>
                <td class="confluenceTd">
                  <p>&#8203;<span class="confluenceTd">Value of your S3 AWS Access Key ID. </span> </p> <pre class="brush: xml; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; "><property>   
   <name>fs.s3.awsAccessKeyId</name>   
   <value>[INSERT YOUR VALUE HERE]</value>
</property></pre> </td>
              </tr>
              <tr>
                <td class="confluenceTd">fs.s3.awsSecretAccessKey</td>
                <td class="confluenceTd">
                  <p>Value of your AWS secret access key.</p> <pre class="brush: xml; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; "><property>   
   <name>fs.s3.awsSecretAccessKey</name>   
   <value>[INSERT YOUR VALUE HERE]</value>
</property></pre> </td>
              </tr>
            </tbody>
          </table>
          <ol class="pentaho-list-ordered" start="3">
            <li>If needed, enter the AWS Access Key ID and Access Key for S3N like this:</li>
          </ol>
          <table class="pentaho-table" title="Pentaho Table">
            <tbody>
              <tr>
                <th class="confluenceTh">Parameter</th>
                <th class="confluenceTh">Values</th>
              </tr>
              <tr>
                <td class="confluenceTd">fs.s3n.awsAccessKeyId</td>
                <td class="confluenceTd">
                  <p>&#8203;<span class="confluenceTd">Value of your S3N AWS Access Key ID. </span> </p> <pre class="brush: xml; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; "><property>
   <name>fs.s3n.awsAccessKeyId</name>
   <value>[INSERT YOUR VALUE HERE]</value>
</property></pre> </td>
              </tr>
              <tr>
                <td class="confluenceTd">fs.s3n.awsSecretAccessKey</td>
                <td class="confluenceTd">
                  <p>Value of your 3N AWS secret access key.</p> <pre class="brush: xml; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; "><property>
   <name>fs.s3n.awsSecretAccessKey</name>
   <value>[INSERT YOUR VALUE HERE]</value>
</property></pre> </td>
              </tr>
            </tbody>
          </table>
          <ol class="pentaho-list-ordered" start="3">
            <li>Add the following values:</li>
          </ol>
          <table class="pentaho-table" title="Pentaho Table">
            <tbody>
              <tr>
                <th class="confluenceTh">Parameter</th>
                <th class="confluenceTh">Values</th>
              </tr>
              <tr>
                <td class="confluenceTd">fs.s3n.impl</td>
                <td class="confluenceTd"> <pre class="brush: xml; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; "><property>
   <name>fs.s3n.impl</name>
   <value>org.apache.hadoop.fs.s3native.NativeS3FileSystem</value>
</property></pre> </td>
              </tr>
              <tr>
                <td class="confluenceTd">fs.s3.impl</td>
                <td class="confluenceTd"> <pre class="brush: xml; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; "><property>
   <name>fs.s3.impl</name>
   <value>org.apache.hadoop.fs.s3.S3FileSystem</value>
</property></pre> </td>
              </tr>
            </tbody>
          </table>
          <ol class="pentaho-list-ordered" start="4">
            <li>LZO is a compression format that <span class="mt-color-000000">Amazon </span> EMR supports. &nbsp;If you want to configure for LZO&nbsp;compression, you will need to download a jar file. &nbsp;If you do not, you will need to remove a parameter
              from the <span class="filepath style-wrap">core-site.xml</span>  file.</li>
          </ol>
          <ul class="pentaho-list-unordered">
            <li><strong>If you are not going to use LZO compression:</strong> &nbsp;Remove any references to the <span class="filepath style-wrap">iocompression</span>  parameter in the <span class="filepath style-wrap">core-site.xml</span>  file:&nbsp;
              <span
              class="filepath style-wrap">com.hadoop.compression.lzo.LzoCodec</span> 
            </li>
            <li><strong>If you are going to use LZO compression:</strong> &nbsp; Download the&nbsp;LZO jar and add it to <span class="filepath style-wrap">pentaho-big-data-plugin/hadoop-configurations/emr3x/lib</span>  directory. &nbsp;The LZO&nbsp;jar can
              be found here:&nbsp;
              <a class="external" href="http://maven.twttr.com/com/hadoop/gplcompression/hadoop-lzo/0.4.19/" rel="external nofollow" target="_blank" title="http://maven.twttr.com/com/hadoop/gplcompression/hadoop-lzo/0.4.19/"><span class="filepath style-wrap">http://maven.twttr.com/com/hadoop/gplcompression/hadoop- <span class="highlight" id="0.40647425362840295">lzo</span> /0.4.19/</span>  </a> 
            </li>
          </ul>
          <ol class="pentaho-list-ordered" start="5">
            <li>Save and close the file.</li>
          </ol>
        </div>
        <div id="section_9" class="mt-page-section"><span id="Edit_mapred-site.xml"></span> 
          <h4 class="editable">Edit mapred-site.xml</h4>
          <p>Edit the&nbsp;<span class="filepath style-wrap">mapred-site.xml</span>  file to indicate where the job history logs are stored and to allow MapReduce jobs to run across platforms.&nbsp;</p>
          <ol class="pentaho-list-ordered">
            <li>Navigate to the <span class="filepath style-wrap">pentaho-big-data-plugin/hadoop-configurations/emrxx</span>  directory and open the <span class="filepath style-wrap">mapred-site.xml</span>  file.</li>
            <li>Add the following values:</li>
          </ol>
          <div class="table-wrap">
            <table class="pentaho-table" title="Pentaho Table">
              <tbody>
                <tr>
                  <th class="confluenceTh">Parameter</th>
                  <th class="confluenceTh">Value</th>
                </tr>
                <tr>
                  <td class="confluenceTd"><span class="filepath style-wrap">mapreduce.app-submission.cross-platform</span> </td>
                  <td class="confluenceTd">
                    <p>This property allows MapReduce jobs to run on either Windows client or Linux server platforms.</p>
                    <div class="code panel">
                      <div class="codeContent panelContent"> <pre class="brush: xml; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; "><property>
  <name>mapreduce.app-submission.cross-platform</name>
  <value>true</value>
</property></pre> </div>
                    </div>
                    <p>&nbsp;</p>
                  </td>
                </tr>
              </tbody>
            </table>
            <ol class="pentaho-list-ordered" start="3">
              <li>Save and close the file.</li>
            </ol>
          </div>
        </div>
      </div>
    </div>
    <div id="section_10" class="mt-page-section"><span id="Create_a_Connection_to_the_Amazon_EMR_Cluster"></span> 
      <h2 class="editable">Create a Connection to 
        <span class="mt-color-000000">the Amazon </span> EMR Cluster
      </h2>
      <p style="visibility: visible;">Creating a connection to the cluster involves setting an active shim, then configuring and testing the connection to the cluster.&nbsp; Making a shim <em>active </em> means it is used by default when you access a cluster.&nbsp; When you initially
        install Pentaho, no shim is active by default.&nbsp; You must choose a shim to make active before you can connect to a cluster. &nbsp; Only one shim can be active at a time.&nbsp; The way you make a shim active, as well as the way you configure
        and test the cluster connection differs by Pentaho component.</p>
      <div id="section_11" class="mt-page-section"><span id="Create_and_Test_a_Connection_to_the_Cluster_in_Spoon"></span> 
        <h3 class="editable">Create and Test a Connection to the Cluster in Spoon</h3>
        <p>Creating and testing a connection to the Amazon EMR cluster from Spoon involves two tasks:</p>
        <ul class="pentaho-list-unordered">
          <li>Set the active shim in Spoon</li>
          <li>Configure and test the cluster connection</li>
        </ul>
        <div id="section_12" class="mt-page-section"><span id="Set_the_Active_Shim_in_Spoon"></span> 
          <h4 class="editable">Set the Active Shim in Spoon</h4>
          <p>You must set an active shim when you want to connect to a Hadoop cluster the first time, or when you want to switch clusters.&nbsp; To set a shim as active, complete the following steps:</p>
          <ol class="pentaho-list-ordered">
            <li> <a href="/Documentation/6.1/0H0/070/010/020" rel="internal" title="https://help.pentaho.com/Documentation/6.0/0H0/070/010/020">Start Spoon</a> . </li>
            <li>Select <strong>Hadoop Distribution... </strong> from the <strong>Tools </strong> menu.</li>
          </ol>
          <p>
            <img alt="HadoopDistribution.png" class="internal default" style="width: 350px; height: 173px;" width="350px" height="173px" src="http://help.pentaho.com/@api/deki/files/7504/HadoopDistribution.png?size=bestfit&amp;width=350&amp;height=173&amp;revision=1"
            />
          </p>
          <ol class="pentaho-list-ordered" start="3">
            <li>In the <strong>Hadoop Distribution</strong>  window, select the Hadoop distribution you want.</li>
            <li>Click <strong>OK</strong> .</li>
            <li>Stop, then restart Spoon.</li>
          </ol>
        </div>
        <div id="section_13" class="mt-page-section"><span id="Configure_and_Test_the_Cluster_Connection"></span> 
          <h4 class="editable">Configure and Test the Cluster Connection</h4>
          <p>You must provide connection details for the cluster and services you will use, such as the hostname for HDFS or the URL for Oozie.&nbsp; Then, you can use a built-in tool to test your configuration to find and troubleshoot common configuration
            issues, such as wrong hostnames and user permission errors.</p>
          <p style="visibility: visible;">Connection settings are set in the <strong>Hadoop cluster</strong>  window.&nbsp; You can get to the settings from several places, but in these instructions, you will get the <strong>Hadoop cluster </strong> window from the <strong>View </strong> tab
            in a transformation or job. Complete the following steps to configure and test a connection:</p>
          <ol class="pentaho-list-ordered">
            <li>In Spoon, create a new job or transformation or open an existing one.</li>
            <li>Click the <strong>View</strong>  tab.</li>
          </ol>
          <p>
            <a title="/@api/deki/files/7723/clusterss.png" rel="internal" href="http://help.pentaho.com/@api/deki/files/7723/clusterss.png">
              <img alt="clusterss.png" class="internal default" style="width: 160px; height: 149px;" width="160px" height="149px" src="http://help.pentaho.com/@api/deki/files/7723/clusterss.png?size=bestfit&amp;width=160&amp;height=149&amp;revision=1" />
            </a> 
          </p>
          <ol class="pentaho-list-ordered" start="3">
            <li>Right-click the<strong>&nbsp;Hadoop cluster</strong>  directory, then click <strong>New</strong> .&nbsp; The <strong>Hadoop cluster</strong>  window appears. &nbsp;</li>
            <li>Enter the information from the following table in the <strong>Hadoop cluster</strong>  window.&nbsp; You can get this information from your Hadoop Administrator.</li>
          </ol>
          <p class="pentaho-note">As a best practice, use Kettle variables for each connection parameter value to mitigate risks associated with running jobs and transformations in environments that are disconnected from the repository.&nbsp;</p>
          <p>
            <a title="/@api/deki/files/7503/HadoopClusterWindow.png" rel="internal" href="http://help.pentaho.com/@api/deki/files/7503/HadoopClusterWindow.png">
              <img alt="HadoopClusterWindow.png" class="internal default" style="width: 239px; height: 350px;" width="239px" height="350px" src="http://help.pentaho.com/@api/deki/files/7503/HadoopClusterWindow.png?size=bestfit&amp;width=239&amp;height=350&amp;revision=1"
              />
            </a> 
          </p>
          <table class="pentaho-table" height="457" title="Pentaho Table" width="605">
            <tbody>
              <tr>
                <th style="width: 171px;">Option</th>
                <th style="width: 400px;">Definition</th>
              </tr>
              <tr>
                <td style="width: 171px;">Cluster Name</td>
                <td style="width: 503px;">Name that you assign the cluster connection.</td>
              </tr>
              <tr>
                <td style="width: 171px;">Use MapR Client</td>
                <td style="width: 503px;">Indicates that this connection is for a MapR cluster. &nbsp;If this box is checked, the fields in the HDFS and JobTracker sections are disabled because those parameters are not needed to configure MapR.</td>
              </tr>
              <tr>
                <td style="width: 171px;">Hostname (in HDFS section)</td>
                <td style="width: 503px;">Hostname for the HDFS node in your Hadoop cluster.</td>
              </tr>
              <tr>
                <td style="width: 171px;">Port&nbsp;(in HDFS section)</td>
                <td style="width: 503px;">Port for the HDFS node in your Hadoop cluster. &nbsp;</td>
              </tr>
              <tr>
                <td style="width: 171px;">Username&nbsp;(in HDFS section)</td>
                <td style="width: 503px;">Username for the HDFS node.</td>
              </tr>
              <tr>
                <td style="width: 171px;">Password&nbsp;(in HDFS section)</td>
                <td style="width: 503px;">Password for the HDFS node.</td>
              </tr>
              <tr>
                <td style="width: 171px;">Hostname (in JobTracker section)</td>
                <td style="width: 503px;">Hostname for the JobTracker node in your Hadoop cluster. &nbsp;If you have a separate job tracker node, enter the hostname here. Otherwise use the HDFS hostname.</td>
              </tr>
              <tr>
                <td style="width: 171px;">Port (in JobTracker section)</td>
                <td style="width: 503px;">Port for the JobTracker in your Hadoop cluster, cannot be the same as the HDFS port number.</td>
              </tr>
              <tr>
                <td style="width: 171px;">Hostname (in ZooKeeper section)</td>
                <td style="width: 503px;">Hostname for the ZooKeeper node in your Hadoop cluster.&nbsp; Supply this only if you want to connect to a ZooKeeper service.</td>
              </tr>
              <tr>
                <td style="width: 171px;">Port (in ZooKeeper section)</td>
                <td style="width: 503px;">Port for the ZooKeeper node in your Hadoop cluster.&nbsp; Supply this only if you want to connect to a ZooKeeper service.</td>
              </tr>
              <tr>
                <td style="width: 171px;">URL (in Oozie section)</td>
                <td style="width: 503px;">Oozie client address.&nbsp; Supply this only if you want to connect to the Oozie service.</td>
              </tr>
            </tbody>
          </table>
          <ol class="pentaho-list-ordered" start="5">
            <li>Click the&nbsp;<strong>Test&nbsp;</strong> button.&nbsp; Test results appear in the <strong>Hadoop Cluster Test </strong> window.&nbsp; If there are no errors, the connection is properly configured. If you have errors, see the Troubleshoot Cluster
              and Service Configuration Issues section below to resolve the issues, then test again.</li>
          </ol>
          <p>
            <a class="thumb" href="/@api/deki/files/7502/HadoopClusterTest.png" rel="internal" title="HadoopClusterTest.png">
              <img alt="HadoopClusterTest.png" class="internal default" style="width: 325px; height: 350px;" width="325px" height="350px" src="http://help.pentaho.com/@api/deki/files/7502/HadoopClusterTest.png?size=bestfit&amp;width=325&amp;height=350&amp;revision=1"
              />
            </a> 
          </p>
          <ol class="pentaho-list-ordered" start="6">
            <li>&nbsp; Click <strong>Close </strong> on the <strong>Hadoop Cluster Test </strong> window, then click <strong>OK </strong> to close the <strong>Hadoop cluster </strong> window.</li>
          </ol>
        </div>
        <div id="section_14" class="mt-page-section"><span id="Copy_the_Spoon_Shim_Files_to_Other_Pentaho_Components"></span> 
          <h4 class="editable">Copy the Spoon Shim Files to Other Pentaho Components</h4>
          <p>Once your connection has been properly configured on Spoon, you can copy the configuration files to the shim directories in the other Pentaho components. Copy following configuration files from the <span class="filepath style-wrap">pentaho-big-data-plugin/hadoop-configurations/emrxx</span>             directory in Spoon to the <span class="filepath style-wrap">pentaho-big-data-shim/emrxx</span>  directory on the Pentaho Server, PRD, or PME:&nbsp;</p>
          <ul class="pentaho-list-unordered">
            <li><span class="filepath style-wrap">core-site.xml</span> </li>
            <li><span class="filepath style-wrap">hdfs-site.xml</span> </li>
            <li><span class="filepath style-wrap">emrfs-site.xml</span> </li>
            <li><span class="filepath style-wrap">httpfs-site.xml</span> </li>
            <li><span class="filepath style-wrap">mapred-site.xml</span> </li>
            <li><span class="filepath style-wrap">yarn-site.xml</span> </li>
          </ul>
        </div>
      </div>
    </div>
    <div id="section_15" class="mt-page-section"><span id="Connect_Other_Pentaho_Components_to_the_Amazon_EMR_Cluster"></span> 
      <h2 class="editable">Connect Other Pentaho Components to the 
        <span class="mt-color-000000">Amazon </span> EMR Cluster
      </h2>
      <p>These instructions explain how to create and test a connection to the cluster in the Pentaho Server, PRD, and PME.&nbsp; Creating and testing a connection to the cluster in Spoon involves two tasks:</p>
      <ul class="pentaho-list-unordered">
        <li>Setting the active shim on PRD, PME, and the Pentaho Servers</li>
        <li>Creating and testing the cluster connections.</li>
      </ul>
      <div id="section_16" class="mt-page-section"><span id="Set_the_Active_Shim_on_PRD.2C_PME.2C_and_the_Pentaho_Server"></span> 
        <h4 class="editable">Set the Active Shim on PRD, PME, and the Pentaho Server</h4>
        <p>Modify the <span class="filepath style-wrap">plugin.properties</span>  file to set the active shim for the Pentaho Server, PRD, and PME.</p>
        <ol class="pentaho-list-ordered">
          <li>Stop&nbsp;the component.</li>
          <li>Locate the&nbsp;<span class="filepath style-wrap">pentaho-big-data-plugin</span>  directory for your component.</li>
          <li>Navigate to the <span class="filepath style-wrap">hadoop-configurations</span>  directory.&nbsp;</li>
          <li>Navigate to the <span class="filepath style-wrap">pentaho-big-data-plugin</span>  directory and open the&nbsp;<span class="filepath style-wrap">plugin.properties</span> &nbsp;file.</li>
          <li>Set&nbsp;the&nbsp;<span class="filepath style-wrap">active.hadoop.configuration</span> &nbsp;property to the directory name of the shim you want to make active.&nbsp; Here is an example:</li>
        </ol>
        <div class="pentaho-code-block style-wrap">
          <pre class="brush: xml; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; ">active.hadoop.configuation=emr46</pre>
        </div>
        <ol class="pentaho-list-ordered" start="6">
          <li>Save&nbsp;and close the&nbsp;<span class="filepath style-wrap">plugin.properties</span> &nbsp;file.</li>
          <li>Restart the component.</li>
        </ol>
      </div>
      <div id="section_17" class="mt-page-section"><span id="Create_and_Test_Connections"></span> 
        <h4 class="editable">Create and Test Connections</h4>
        <p>Connection tests appear in the following table:</p>
        <table border="1" cellpadding="1" cellspacing="1" class="pentaho-table" height="146" style="table-layout: fixed; width: 714px;" title="Pentaho Table" width="654">
          <tbody>
            <tr>
              <th style="width: 200px;">Component</th>
              <th style="width: 501px;">Test</th>
            </tr>
            <tr>
              <td style="width: 200px;">Pentaho Server for DI</td>
              <td style="width: 501px;">
                <p>Create a transformation in Spoon and run it remotely.</p>
              </td>
            </tr>
            <tr>
              <td style="width: 200px;">Pentaho Server for BA</td>
              <td style="width: 501px;">Create a connection to the cluster in the Data Source Wizard.</td>
            </tr>
            <tr>
              <td style="width: 200px;">PME</td>
              <td style="width: 501px;">Create a connection to the cluster in PME.</td>
            </tr>
            <tr>
              <td style="width: 200px;">PRD</td>
              <td style="width: 501px;">Create a connection to the cluster in PRD.</td>
            </tr>
          </tbody>
        </table>
        <p>Once you've connected to the cluster and its services properly, provide connection information to users who need access to the cluster and its services.&nbsp; Those users can only obtain access from computers that have been properly configured
          to connect to the cluster.</p>
        <p>Here is what they need to connect:</p>
        <ul class="pentaho-list-unordered">
          <li>Hadoop distribution and version of the cluster</li>
          <li>HDFS, JobTracker, ZooKeeper, and Hive2/Impala Hostnames, IP addresses and port numbers</li>
          <li>Oozie URL (if used)</li>
          <li>Users also require the appropriate permissions to access the directories they need on HDFS.&nbsp; This typically includes their home directory and any other required directories.</li>
        </ul>
        <p>They might also need more information depending on the job entries, transformation steps, and services they use.&nbsp;
          <a href="/Documentation/6.1/0L0/040/025/010" rel="internal" title="Connection and Access Information">Here's a more detailed list of information that your users might need from you</a> .</p>
      </div>
    </div>
    <div id="section_18" class="mt-page-section"><span id="General_Notes"></span> 
      <h2 class="editable">General Notes</h2>
      <div id="section_19" class="mt-page-section"><span id="Sqoop_.22Unsupported_major.minor_version.22_Error"></span> 
        <h3 class="editable">Sqoop &quot;Unsupported major.minor version&quot; Error</h3>
        <p>If you are using Pentaho 6.0 and the Java version on your cluster is older than the Java version that Pentaho uses, you must change Pentaho's JDK so it is the same major version as the JDK on the cluster. The JDK that you install for Pentaho must
          meet the requirements in the
          <a title="Components Reference" rel="internal" href="http://help.pentaho.com/Documentation/7.0/0D0/160/000#Java_Virtual_Machine">Supported Components</a>  matrix. To learn how to
          <a title="Prepare Your Windows Environment for Installation" rel="internal" href="http://help.pentaho.com/Documentation/7.0/0F0/0P0/020/0A0#Install_Java">download and install the JDK read this article</a> .&nbsp;</p>
      </div>
    </div>
    <div id="section_20" class="mt-page-section"><span id="Version-Specific_Notes"></span> 
      <h2 class="editable">Version-Specific Notes</h2>
      <div id="section_21" class="mt-page-section"><span id="Impala_and_HBase_Shim_Support"></span> 
        <h3 class="editable">Impala and HBase&nbsp;Shim&nbsp;Support&nbsp;</h3>
        <table style="width: 717px;" title="Pentaho Table">
          <tbody>
            <tr>
              <th style="width: 170px;">&nbsp;</th>
              <th style="width: 271px;">HBase</th>
              <th style="width: 265px;">Impala</th>
            </tr>
            <tr>
              <td style="width: 170px;">Amazon EMR 3.4</td>
              <td style="width: 271px;">Not supported</td>
              <td style="width: 265px;">Supported</td>
            </tr>
            <tr>
              <td style="width: 170px;">Amazon EMR 3.10</td>
              <td style="width: 271px;">Not supported</td>
              <td style="width: 265px;">Supported</td>
            </tr>
            <tr>
              <td style="width: 170px;">Amazon EMR 4.1</td>
              <td style="width: 271px;">Not supported</td>
              <td style="width: 265px;">Not supported</td>
            </tr>
          </tbody>
        </table>
      </div>
      <div id="section_22" class="mt-page-section"><span id="Amazon_EMR_4.1"></span> 
        <h3 class="editable">Amazon EMR 4.1</h3>
        <p>The following issue can occur in the Amazon EMR 4.1 shim.</p>
        <div id="section_23" class="mt-page-section"><span id="Cannot_Create_S3_Buffer_Directory_Error"></span> 
          <h4 class="editable">Cannot Create S3 Buffer Directory Error</h4>
          <p>This error can occur if you use PDI to run a Pentaho MapReduce on the&nbsp;Amazon EMR cluster. If you get this error, the MapReduce job fails when you try to run it. This error usually occurs on Windows computers only.</p>
          <ol class="pentaho-list-ordered">
            <li>To resolve the error, make sure the person who is running the PDI job has read, write, and execute access on Amazon EMR's S3 buffer directories. These directories are specified in the <span class="filepath style-wrap">core-site.xml</span>               file on the Amazon EMR cluster, but are usually<span class="filepath style-wrap"> /mnt/s3</span>  and <span class="filepath style-wrap">/mnt1/s3</span> .</li>
            <li>If you still get this error, comment out these lines in the core-site.xml file in the&nbsp;Amazon EMR shim directory on the computers where Spoon and the Pentaho Server are installed:</li>
          </ol> <pre>

<!--
<property>
<name>fs.s3.buffer.dir</name>
<value>/mnt/s3,/mnt1/s3</value>
</property>
-->
</pre>
          <ol class="pentaho-list-ordered" start="3">
            <li>Save and close the <span class="filepath style-wrap">core-site.xml</span>  files on Spoon and the Pentaho Server.</li>
            <li>Stop and restart Spoon and the Pentaho Server.</li>
            <li>Run the job again.</li>
          </ol>
        </div>
      </div>
    </div>
    <div id="section_24" class="mt-page-section"><span id="Troubleshoot_Cluster_and_Service_Configuration_Issues"></span> 
      <h2 class="editable">Troubleshoot Cluster and Service Configuration Issues</h2>
      <div id="section_25" class="mt-page-section"><span id="General_Configuration_Problems"></span> 
        <h3 class="editable">General Configuration Problems</h3>
        <p>The issues in this section explain how to resolve common configuration problems.&nbsp;</p>
        <div id="section_26" class="mt-page-section"><span id="Shim_and_Configuration_Issues"></span> 
          <h4 class="editable">Shim and Configuration Issues</h4>
          <table border="0" cellpadding="0" cellspacing="0" class="pentaho-table" title="Pentaho Table" width="715">
            <tbody>
              <tr>
                <th style="width: 152px;">Symptoms</th>
                <th style="width: 226px;">Common Causes</th>
                <th>Common Resolutions</th>
              </tr>
              <tr>
                <td style="width: 152px;">
                  <p>No shim</p>
                </td>
                <td style="width: 226px;">
                  <ul class="pentaho-list-unordered">
                    <li>Active shim was not selected.</li>
                    <li>Shim was installed in the&nbsp; wrong place.</li>
                    <li>Shim name was not entered correctly in the <span class="filepath style-wrap">plugin.properties</span>  file.</li>
                  </ul>
                </td>
                <td>
                  <ul class="pentaho-list-unordered">
                    <li>Verify that the plugin name that is in the <span class="filepath style-wrap">plugin.properties</span>  file <span class="mt-color-000000">matches the directory name in the <span class="filepath style-wrap">pentaho-big-data-plugin/hadoop-configurations</span>                       directory</span> .&nbsp;</li>
                    <li>Make sure the shim is installed in the <span class="mt-color-000000">correct place</span> .</li>
                    <li>Check the instructions for your Hadoop distribution in the
                      <a rel="internal" target="_blank" title="Configuration" href="/Documentation/7.0/0H0#Set_Up_Pentaho_to_Connect_to_a_Hadoop_Cluster">Set Up Pentaho to Connect to a Hadoop Cluster</a>  section of the Configuration article for more details on how to verify the plugin name and shim installation directory.</li>
                  </ul>
                </td>
              </tr>
              <tr>
                <td style="width: 152px;">Shim doesn't load</td>
                <td style="width: 226px;">
                  <ul class="pentaho-list-unordered">
                    <li>Required licenses are not installed.</li>
                    <li>You tried to load a shim that is not supported by your version of Pentaho.</li>
                    <li>If you are using MapR, the client might not have been installed correctly.&nbsp;</li>
                    <li>Configuration file changes were made incorrectly.</li>
                  </ul>
                </td>
                <td>
                  <ul class="pentaho-list-unordered">
                    <li>Verify the
                      <a href="/Documentation/7.0/0P0/Managing_Pentaho_Licenses" rel="internal" target="_blank" title="Managing Pentaho Licenses">required licenses are installed</a>  and have not expired.</li>
                    <li>Verify that the shim is supported by your version of Pentaho.
                      <a href="/Documentation/7.0/0L0/0Y0/010" rel="internal" target="_blank" title="Get Help and Version Information">Find your version of Pentaho</a>, then look for the corresponding
                      <a href="/Documentation/7.0/0D0/160/000" rel="internal" target="_blank" title="Components Reference">Components Reference</a>  for more details.</li>
                    <li>Verify that configuration file changes were made correctly.&nbsp; Contact your Hadoop Administrator or see the
                      <a rel="internal" title="Configuration" href="/Documentation/7.0/0H0#Set_Up_Pentaho_to_Connect_to_a_Hadoop_Cluster">Set Up Pentaho to Connect to a Hadoop Cluster</a>  section of the Configuration article .</li>
                    <li>If you are connecting to MapR, verify that the client was properly installed.&nbsp; See MapR documentation for details.</li>
                    <li>Restart Spoon, then test again.</li>
                    <li>If this error continues to occur, files might be corrupted.&nbsp; Download a new copy of the shim from the Pentaho Customer Support Portal.</li>
                  </ul>
                </td>
              </tr>
              <tr>
                <td style="width: 152px;">The file system's URL does not match the URL in the configuration file.</td>
                <td style="width: 226px;">Configuration files (<span class="filepath style-wrap">*-site.xml</span>  files) were not configured properly.&nbsp;</td>
                <td>Verify that the configuration files were configured correctly.&nbsp; Verify that the <span class="filepath style-wrap">core-site.xml</span>  file is configured correctly.&nbsp; See the instructions for your Hadoop distribution in the
                  <a
                  rel="internal" title="Configuration" href="/Documentation/7.0/0H0#Set_Up_Pentaho_to_Connect_to_a_Hadoop_Cluster">Set Up Pentaho to Connect to a Hadoop Cluster</a>  section of the Configuration article for details.</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div id="section_27" class="mt-page-section"><span id="Connection_Problems"></span> 
          <h4 class="editable">Connection Problems</h4>
          <table border="0" cellpadding="0" cellspacing="0" class="pentaho-table" title="Pentaho Table" width="715">
            <tbody>
              <tr>
                <th style="width: 151px;">Symptoms</th>
                <th style="width: 227px;">Common Causes</th>
                <th>Common Resolutions</th>
              </tr>
              <tr>
                <td style="width: 143px;">Hostname incorrect or not resolving properly.</td>
                <td style="width: 180px;">
                  <ul class="pentaho-list-unordered">
                    <li>No hostname has been specified.</li>
                    <li>Hostname/IP Address is incorrect.</li>
                    <li>Hostname is not resolving properly in the DNS.</li>
                  </ul>
                </td>
                <td>
                  <ul class="pentaho-list-unordered">
                    <li>Verify that the Hostname/IP address is correct.</li>
                    <li>Check the DNS to make sure the Hostname is resolving properly.&nbsp;</li>
                  </ul>
                </td>
              </tr>
              <tr>
                <td style="width: 143px;">Port name is incorrect.</td>
                <td style="width: 180px;">
                  <ul class="pentaho-list-unordered">
                    <li>No port number has been specified.</li>
                    <li>Port&nbsp; number is incorrect.</li>
                    <li>Port number is not numeric.</li>
                  </ul>
                </td>
                <td>
                  <ul class="pentaho-list-unordered">
                    <li>Verify that the port number is correct.</li>
                    <li>If you don't have a port number, determine whether your cluster has been enabled for high availability. If it has, then you do not need a port number.</li>
                  </ul>
                </td>
              </tr>
              <tr>
                <td style="width: 143px;">Can't connect.</td>
                <td style="width: 180px;">
                  <ul class="pentaho-list-unordered">
                    <li>Firewall is a barrier to connecting.</li>
                    <li>Other networking&nbsp;issues are occurring.</li>
                  </ul>
                </td>
                <td>
                  <ul class="pentaho-list-unordered">
                    <li>Verify that a firewall is not impeding the connection and that there aren't other network issues.&nbsp;</li>
                  </ul>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div id="section_28" class="mt-page-section"><span id="Directory_Access_or_Permissions_Issues"></span> 
          <h4 class="editable">Directory Access or Permissions Issues</h4>
          <table border="0" cellpadding="0" cellspacing="0" class="pentaho-table" title="Pentaho Table" width="715">
            <tbody>
              <tr>
                <th style="width: 151px;">Symptoms</th>
                <th style="width: 227px;">Common Causes</th>
                <th>Common Resolutions</th>
              </tr>
              <tr>
                <td style="width: 143px;">
                  <p>Can't access directory.</p>
                </td>
                <td style="width: 180px;">
                  <ul class="pentaho-list-unordered">
                    <li>Authorization and/or authentication&nbsp;issues.</li>
                    <li>Directory is not on the cluster.</li>
                  </ul>
                </td>
                <td>
                  <ul class="pentaho-list-unordered">
                    <li>Make sure the user has been granted read, write, and execute access to the directory.&nbsp;</li>
                    <li>Ensure security settings for the cluster and shim allow access.</li>
                    <li>Verify the hostname and port number are correct for the Hadoop File System's&nbsp;NameNode.&nbsp;</li>
                  </ul>
                </td>
              </tr>
              <tr>
                <td style="width: 143px;">
                  <p>Can't create, read, update, or delete files or directories</p>
                </td>
                <td style="width: 180px;">
                  <p>Authorization and/or authentication&nbsp;issues.</p>
                </td>
                <td>
                  <ul class="pentaho-list-unordered">
                    <li>Make sure the user has been authorized execute&nbsp;access to the directory.&nbsp;</li>
                    <li>Ensure security settings for the cluster and shim allow access.</li>
                    <li>Verify that the hostname and port number are correct for the NameNode</li>
                  </ul>
                </td>
              </tr>
              <tr>
                <td style="width: 143px;">Test file cannot be overwritten.&nbsp;</td>
                <td style="width: 180px;">Pentaho test file is already in the directory.</td>
                <td>
                  <ul class="pentaho-list-unordered">
                    <li>A file with the same name as the Pentaho test file is already in the directory.&nbsp; The test file is used to make sure that the user can create, write, and delete in the user's home directory.</li>
                    <li>The test was run, but the file was not deleted.&nbsp; You will need to manually delete the test file.&nbsp; Check the log for the test file name.</li>
                  </ul>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div id="section_29" class="mt-page-section"><span id="Oozie_Issues"></span> 
          <h4 class="editable">Oozie Issues</h4>
          <table border="0" cellpadding="0" cellspacing="0" class="pentaho-table" title="Pentaho Table" width="715">
            <tbody>
              <tr>
                <th style="width: 151px;">Symptoms</th>
                <th style="width: 227px;">Common Causes</th>
                <th>Common Resolutions</th>
              </tr>
              <tr>
                <td style="width: 143px;">
                  <p>Can't connect to Oozie.</p>
                </td>
                <td style="width: 180px;">
                  <ul class="pentaho-list-unordered">
                    <li>Firewall issue.</li>
                    <li>Other networking&nbsp;issues.</li>
                    <li>Oozie URL is incorrect.</li>
                  </ul>
                </td>
                <td>
                  <ul class="pentaho-list-unordered">
                    <li>Verify that the Oozie URL was correctly entered.</li>
                    <li>Verify that a firewall is not impeding the connection.&nbsp;</li>
                  </ul>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div id="section_30" class="mt-page-section"><span id="ZooKeeper_Problems"></span> 
          <h4 class="editable">ZooKeeper Problems</h4>
          <table border="0" cellpadding="0" cellspacing="0" class="pentaho-table" title="Pentaho Table" width="715">
            <tbody>
              <tr>
                <th style="width: 151px;">Symptoms</th>
                <th style="width: 227px;">Common Causes</th>
                <th>Common Resolutions</th>
              </tr>
              <tr>
                <td style="width: 191px;">
                  <p>Can't connect to ZooKeeper.</p>
                </td>
                <td style="width: 193px;">
                  <ul class="pentaho-list-unordered">
                    <li>Firewall is hindering connection with the ZooKeeper service.</li>
                    <li>Other networking&nbsp;issues.</li>
                  </ul>
                </td>
                <td style="width: 297px;">
                  <ul class="pentaho-list-unordered">
                    <li>Verify that a firewall is not impeding the connection.&nbsp;</li>
                  </ul>
                </td>
              </tr>
              <tr>
                <td>
                  <p>ZooKeeper hostname or port not found or doesn't resolve properly.&nbsp;&nbsp;</p>
                </td>
                <td>
                  <ul class="pentaho-list-unordered">
                    <li>Hostname/IP address and port number is missing or is incorrect.</li>
                  </ul>
                </td>
                <td>
                  <ul class="pentaho-list-unordered">
                    <li>Try to connect to the ZooKeeper nodes using ping or another method.</li>
                    <li>Verify that the Hostname/IP address and port numbers are correct.</li>
                  </ul>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </body>
  <body target="toc">
    <ol>
      <li> <a href="#Overview" rel="internal">Overview</a>  </li>
      <li> <a href="#Before_You_Begin" rel="internal">Before You Begin</a>  </li>
      <li>
        <a href="#Configure_Pentaho_Component_Shims" rel="internal">Configure Pentaho Component Shims</a> 
        <ol>
          <li> <a href="#Step_1:_Locate_the__Pentaho_Big_Data_Plugin_and_Shim_Directories" rel="internal">Step 1: Locate the&nbsp; Pentaho Big Data Plugin and&nbsp;Shim Directories</a>  </li>
          <li> <a href="#Step_2:_Select_the_Correct_Shim" rel="internal">Step 2: Select the Correct Shim</a>  </li>
          <li> <a href="#Step_3:_Copy_the_Configuration_Files_from_Cluster_to_Shim" rel="internal">Step 3: Copy the Configuration Files from Cluster to Shim</a>  </li>
          <li>
            <a href="#Step_4:_Edit_the_Shim_Configuration_Files" rel="internal">Step 4: Edit the Shim Configuration Files</a> 
            <ol>
              <li> <a href="#Verify_or_Edit_core-site.xml" rel="internal">Verify or Edit core-site.xml</a>  </li>
              <li> <a href="#Edit_mapred-site.xml" rel="internal">Edit mapred-site.xml</a>  </li>
            </ol>
          </li>
        </ol>
      </li>
      <li>
        <a href="#Create_a_Connection_to_the_Amazon_EMR_Cluster" rel="internal">Create a Connection to the Amazon EMR Cluster</a> 
        <ol>
          <li>
            <a href="#Create_and_Test_a_Connection_to_the_Cluster_in_Spoon" rel="internal">Create and Test a Connection to the Cluster in Spoon</a> 
            <ol>
              <li> <a href="#Set_the_Active_Shim_in_Spoon" rel="internal">Set the Active Shim in Spoon</a>  </li>
              <li> <a href="#Configure_and_Test_the_Cluster_Connection" rel="internal">Configure and Test the Cluster Connection</a>  </li>
              <li> <a href="#Copy_the_Spoon_Shim_Files_to_Other_Pentaho_Components" rel="internal">Copy the Spoon Shim Files to Other Pentaho Components</a>  </li>
            </ol>
          </li>
        </ol>
      </li>
      <li>
        <a href="#Connect_Other_Pentaho_Components_to_the_Amazon_EMR_Cluster" rel="internal">Connect Other Pentaho Components to the Amazon EMR Cluster</a> 
        <ol>
          <li> <a href="#Set_the_Active_Shim_on_PRD.2C_PME.2C_and_the_Pentaho_Server" rel="internal">Set the Active Shim on PRD, PME, and the Pentaho Server</a>  </li>
          <li> <a href="#Create_and_Test_Connections" rel="internal">Create and Test Connections</a>  </li>
        </ol>
      </li>
      <li>
        <a href="#General_Notes" rel="internal">General Notes</a> 
        <ol>
          <li> <a href="#Sqoop_.22Unsupported_major.minor_version.22_Error" rel="internal">Sqoop &quot;Unsupported major.minor version&quot; Error</a>  </li>
        </ol>
      </li>
      <li>
        <a href="#Version-Specific_Notes" rel="internal">Version-Specific Notes</a> 
        <ol>
          <li> <a href="#Impala_and_HBase_Shim_Support" rel="internal">Impala and HBase&nbsp;Shim&nbsp;Support&nbsp;</a>  </li>
          <li>
            <a href="#Amazon_EMR_4.1" rel="internal">Amazon EMR 4.1</a> 
            <ol>
              <li> <a href="#Cannot_Create_S3_Buffer_Directory_Error" rel="internal">Cannot Create S3 Buffer Directory Error</a>  </li>
            </ol>
          </li>
        </ol>
      </li>
      <li>
        <a href="#Troubleshoot_Cluster_and_Service_Configuration_Issues" rel="internal">Troubleshoot Cluster and Service Configuration Issues</a> 
        <ol>
          <li>
            <a href="#General_Configuration_Problems" rel="internal">General Configuration Problems</a> 
            <ol>
              <li> <a href="#Shim_and_Configuration_Issues" rel="internal">Shim and Configuration Issues</a>  </li>
              <li> <a href="#Connection_Problems" rel="internal">Connection Problems</a>  </li>
              <li> <a href="#Directory_Access_or_Permissions_Issues" rel="internal">Directory Access or Permissions Issues</a>  </li>
              <li> <a href="#Oozie_Issues" rel="internal">Oozie Issues</a>  </li>
              <li> <a href="#ZooKeeper_Problems" rel="internal">ZooKeeper Problems</a>  </li>
            </ol>
          </li>
        </ol>
      </li>
    </ol>
  </body>
</content>