<content type="text/html" title="Extend Pentaho Data Integration">
  <body>
    <div class="body conbody">
      <p class="p">To extend the standard PDI functionality, you may want to develop custom plugins. The instructions in this section address common extending scenarios, with each scenario having its own sample project. These folders of the sample code package contain
        sample projects.&nbsp; See the
        <a title="https://help.pentaho.com/Documentation/5.3/0R0/0V0/000" rel="internal" href="http://help.pentaho.com/Documentation/7.0/0R0/0V0/000">Getting Sample Projects</a> &nbsp;topic in the Get Started section of this guide to learn how to access the sample code.</p>
      <div class="p">
        <ul class="ul" id="387dfb9b-2dda-4d65-9e91-4d8129556452__extending_PDI__ul_prw_k5w_qh">
          <li class="li">kettle-sdk-step-plugin</li>
          <li class="li">kettle-sdk-jobentry-plugin</li>
          <li class="li">kettle-sdk-database-plugin</li>
          <li class="li">kettle-sdk-partitioner-plugin</li>
        </ul>
        <div id="section_1" class="mt-page-section"><span id="Creating_Different_Types_of_Plugins"></span> 
          <h2 class="editable">Creating Different Types of Plugins</h2>
          <p class="li">Depending on what you want your plugin to do you may want to create one of any of the following types of plugins:</p>
        </div>
      </div>
    </div>
    <div class="related-links">
      <ul class="pentaho-list-unordered">
        <li class="link ulchildlink">
          <a title="Creating Step Plugins" rel="internal" href="http://help.pentaho.com/Documentation/7.0/0R0/0V0/010/000">Create Step Plugins</a> 
        </li>
        <li class="link ulchildlink">
          <a title="Creating Job Entry Plugins" rel="internal" href="http://help.pentaho.com/Documentation/7.0/0R0/0V0/010/010">Create Job Entry Plugins</a> 
        </li>
        <li class="link ulchildlink">
          <a title="Creating Database Plugins" rel="internal" href="http://help.pentaho.com/Documentation/7.0/0R0/0V0/010/020">Create Database Plugins</a> 
        </li>
        <li class="link ulchildlink">
          <a title="Creating Partitioner Plugins" rel="internal" href="http://help.pentaho.com/Documentation/7.0/0R0/0V0/010/030">Create Partitioner Plugins</a> 
        </li>
      </ul>
      <div id="section_2" class="mt-page-section"><span id="Creating_Icons_for_Step_or_Entry_Plugins"></span> 
        <h2 class="editable">Creating Icons for Step or Entry Plugins</h2>
        <p>Depending on your plugin, you may need to create an icon to represent it's purpose.
          <a title="Creating PDI Icons" rel="internal" href="http://help.pentaho.com/Documentation/7.0/0R0/0V0/010/035">Learn more </a> about how to create an icon that aligns with the design guidelines within PDI.</p>
      </div>
      <div id="section_3" class="mt-page-section"><span id="Debuging_Plugins"></span> 
        <h2 class="editable">Debuging Plugins</h2>
        <div class="section context">
          <p class="p">A good way to debug PDI plugins is to deploy the plugin, launch Spoon, and connect the debugger to the Spoon JVM. This section explains how to debug a plugin in Eclipse.</p>
        </div>
        <ol class="ol steps">
          <li class="li step"><span class="ph cmd">Prepare Spoon for debugging.</span> 
            <ol class="ol substeps" id="03f51f07-50ec-4d4d-9b9a-6b1b50f93ce1__debugging_plugins__substeps_cdx_351_4h" type="a">
              <li class="li substep"><span class="ph cmd">Start the Spoon JVM, allowing debug sessions and passing these arguments to the Spoon JVM.</span>  <pre class="pre codeblock">
-Xdebug -Xnoagent -Djava.compiler=NONE -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=1044</pre>
                <p class="p">The address argument can be any free port on your machine. This example uses port 1044.&nbsp;</p>
                <p class="p">If you are using <span class="ph filepath">Spoon.bat</span>  or <span class="ph filepath">spoon.sh</span>  to launch Spoon, create a copy of the file and edit it to include the debugging parameters to the Java options near the bottom of
                  the file. If you are using a Mac app, add the JVM parameters to&nbsp;</p>
                <p class="p"><code class="ph codeph">VMOptions key of &ldquo;Data Integration 64-bit.app/Contents/Info.plist&rdquo; </code>or <code class="ph codeph">&ldquo;Data Integration 32-bit.app/Contents/Info.plist&rdquo;</code> respectively.&nbsp;</p>
              </li>
            </ol> When you start Spoon, debuggers connect on port 1044.</li>
          <li class="li step"><span class="ph cmd">Launch a debug session.</span> 
            <ol class="ol substeps" id="03f51f07-50ec-4d4d-9b9a-6b1b50f93ce1__debugging_plugins__substeps_ezq_zv1_4h" type="a">
              <li class="li substep"><span class="ph cmd">Ensure that Spoon is set up for debugging and running with the plugin deployed.</span> </li>
              <li class="li substep"><span class="ph cmd">Connect the Eclipse debugger by creating a debug configuration for your plugin project. From the <span class="ph uicontrol">Run/Debug Configurations</span>  menu, create a new configuration for <span class="ph uicontrol">Remote Java Application</span> .
                </span> 
              </li>
              <li class="li substep"><span class="ph cmd">Select your project, making sure the port matches the port configured in step 1.</span> </li>
              <li class="li substep"><span class="ph cmd">Decide whether you want to be able to kill the Spoon JVM from the debugger, then click <span class="ph uicontrol">Apply</span>  and <span class="ph uicontrol">Debug</span> .</span> 
              </li>
            </ol> The debugger opens, stops at the breakpoints you set, and in-line editing of the plugin source is enabled.
            <p class="p">
              <br />
              <img alt="" class="internal default" style="width: 500px; height: 332px;" width="500px" height="332px" src="http://help.pentaho.com/@api/deki/files/1626/screenshot_debug_configuration_eclipse.png?size=bestfit&amp;width=500&amp;height=332&amp;revision=1"
              /><span id="cke_bm_124C" style="display: none;">&nbsp;</span> </p>
          </li>
        </ol>
      </div>
    </div>
    <div id="section_4" class="mt-page-section"><span id="Localizing_Plugins"></span> 
      <h2 class="editable">Localizing&nbsp;Plugins</h2>
      <p class="p"><strong class="ph b">Message Bundles</strong> </p>
      <p class="p">PDI uses property files for internationalization. Property files reside in the <code class="ph codeph">messages</code> sub-package in the plugin <span class="ph filepath">jar</span>  file.&nbsp;Each property file is specific to a locale. Property
        files contain translations for message keys that are used in the source code. A <code class="ph codeph">messages</code> sub-package containing locale-specific translations is called a message bundle.</p>
      <p class="p">Consider the package layout of the sample job entry plugin project. It contains its main Java class in the <code class="ph codeph">org.pentaho.di.sdk.samples.jobentries.demo</code>package, and there is a message bundle containing the localized strings
        for the <span class="ph filepath">en_US</span>  locale. &nbsp;</p>
      <p>
        <br />
        <img alt="File:/screenshot_messages_bundle.png" class="image internal" id="b50effb1-5baf-4f1f-b364-8668b8832e4c__localization__image_xsb_133_nh" src="http://help.pentaho.com/@api/deki/files/8313/screenshot_messages_bundle.png?revision=1" />
      </p>
      <p class="p">Additional property files can be added using the naming pattern <code class="ph codeph">messages_<locale>.properties</code>. PDI core steps and job entries usually come with several localizations. See the shell job entry messages package for an
        example of more complete <code class="ph codeph">i18n</code>:
        <a class="external-link" href="https://github.com/pentaho/pentaho-kettle/tree/master/engine/src/org/pentaho/di/job/entries/shell/messages" rel="nofollow">https://github.com/pentaho/pentaho-kettle/tree/master/engine/src/org/pentaho/di/job/entries/shell/messages</a> .&nbsp;</p>
      <p class="p"><strong class="ph b">Resolving Localized Strings</strong> </p>
      <p class="p">The key to resolving localized strings is to use the <code class="ph codeph">getString()</code> methods of
        <a class="xref link-https" target="_blank" title="https://github.com/pentaho/pentaho-kettle/blob/master/core/src/org/pentaho/di/i18n/BaseMessages.java"
        rel="external nofollow" href="https://github.com/pentaho/pentaho-kettle/blob/master/core/src/org/pentaho/di/i18n/BaseMessages.java"><code class="ph codeph">org.pentaho.di.i18n.BaseMessages</code></a> . PDI follows conventions when using this class, which enables easy integration with the
        <a class="xref external" target="_blank" rel="external nofollow" href="http://wiki.pentaho.com/display/EAI/Kettle+4+and+the+art+of+internationalization">PDI translator tool</a> .&nbsp;</p>
      <p class="p">All PDI plugin classes that use localization declare a private static <code class="ph codeph">Class<?> PKG</code> field, and assign a class that lives one package-level above the message bundle package. This is often the main class of the plugin.</p>
      <p class="p">With the <code class="ph codeph">PKG</code> field defined, the plugin then resolves its localized strings with a call to <code class="ph codeph">BaseMessages.getString(PKG, &ldquo;localization key&rdquo;, ... optional_parameters)</code>. The first
        argument helps PDI finding the correct message bundle, the second argument is the key to localize, and the optional parameters are injected into the localized string following the Java
        <a class="xref external" target="_blank" rel="external nofollow"
        href="http://docs.oracle.com/javase/6/docs/api/java/text/MessageFormat.html">Message Format</a>  conventions.</p>
      <p class="p"><strong class="ph b">Common Localization Strings</strong> </p>
      <p class="p">Some strings are commonly used,and have been pulled together into a common message bundle in
        <a class="xref link-https" target="_blank" title="https://github.com/pentaho/pentaho-kettle/tree/master/core/src/org/pentaho/di/i18n" rel="external nofollow"
        href="https://github.com/pentaho/pentaho-kettle/tree/master/core/src/org/pentaho/di/i18n"><code class="ph codeph">org.pentaho.di.i18n.messages</code></a> . Whenever <code class="ph codeph">BaseMessages</code> cannot find the key in the specified message bundle, PDI looks for the key in the common message bundle.&nbsp;</p>
      <p class="p"><strong class="ph b">Example</strong> </p>
      <p class="p">For an example, check the sample
        <a class="xref" title="Sample Job Entry Plugin" rel="internal" href="http://help.pentaho.com/Documentation/7.0/0R0/0V0/010/010/040">Job Entry plugin project</a>, which uses this technique for localized string resolution in its dialog class.&nbsp;</p>
    </div>
  </body>
  <body target="toc">
    <ol>
      <li> <a href="#Creating_Different_Types_of_Plugins" rel="internal">Creating Different Types of Plugins</a>  </li>
      <li> <a href="#Creating_Icons_for_Step_or_Entry_Plugins" rel="internal">Creating Icons for Step or Entry Plugins</a>  </li>
      <li> <a href="#Debuging_Plugins" rel="internal">Debuging Plugins</a>  </li>
      <li> <a href="#Localizing_Plugins" rel="internal">Localizing&nbsp;Plugins</a>  </li>
    </ol>
  </body>
</content>