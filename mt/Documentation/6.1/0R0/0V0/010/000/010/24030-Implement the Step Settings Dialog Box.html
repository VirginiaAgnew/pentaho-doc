<content type="text/html" title="Implement the Step Settings Dialog Box">
  <body>
    <div>
      <div class="body conbody">
        <div class="tablenoborder">
          <table border="1" cellpadding="4" cellspacing="0" class="table" frame="border" rules="all" summary="">
            <tbody class="tbody">
              <tr class="row">
                <td class="entry" valign="top" width="25%"><strong class="ph b">Java Interface</strong> </td>
                <td class="entry" valign="top" width="75%">
                  <a class="xref external" target="_blank" title="http://javadoc.pentaho.com/kettle530/kettle-engine-5.3.0.0-javadoc/org/pentaho/di/trans/step/StepDialogInterface.html" rel="external nofollow" href="http://javadoc.pentaho.com/kettle530/kettle-engine-5.3.0.0-javadoc/org/pentaho/di/trans/step/StepDialogInterface.html"><code class="ph codeph">org.pentaho.di.trans.step.StepDialogInterface</code> </a> 
                </td>
              </tr>
              <tr class="row">
                <td class="entry" valign="top" width="25%"><strong class="ph b">Base class</strong> </td>
                <td class="entry" valign="top" width="75%">
                  <a class="xref external" target="_blank" title="http://javadoc.pentaho.com/kettle530/kettle-ui-swt-5.3.0.0-javadoc/org/pentaho/di/ui/trans/step/BaseStepDialog.html" rel="external nofollow" href="http://javadoc.pentaho.com/kettle530/kettle-ui-swt-5.3.0.0-javadoc/org/pentaho/di/ui/trans/step/BaseStepDialog.html"><code class="ph codeph">org.pentaho.di.ui.trans.step.BaseStepDialog</code> </a> 
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <p class="p"><code class="ph codeph">StepDialogInterface</code> is the Java interface that implements the plugin settings dialog.</p>
        <p class="p"><strong class="ph b">Maintain the Dialog for Step Settings</strong> </p>
        <p class="p">The <code class="ph codeph">dialog</code> class is responsible for constructing and opening the settings dialog for the step. Whenever you open the step settings in Spoon, the system instantiates the <code class="ph codeph">dialog</code> class
          passing in the <code class="ph codeph">StepMetaInterface</code> object and calling <code class="ph codeph">open()</code> on the dialog.
          <a class="xref external" target="_blank" rel="external nofollow" href="http://www.eclipse.org/swt/">SWT</a>  is the native windowing environment of Spoon and is the framework used for implementing step dialogs.&nbsp;</p>
        <p class="p"><code class="ph codeph">public String open()</code></p>
        <p class="p">This method returns only after the dialog has been confirmed or cancelled. The method must conform to these rules.&nbsp;</p>
        <ul class="ul">
          <li class="li">If the dialog is confirmed
            <ul class="ul">
              <li class="li">The <code class="ph codeph">StepMetaInterface</code> object must be updated to reflect the new step settings</li>
              <li class="li">If you changed any step settings, the Changed flag of the <code class="ph codeph">StepMetaInterface</code> object flag must be set to <code class="ph codeph">true</code></li>
              <li class="li"><code class="ph codeph">open()</code> returns the name of the step</li>
            </ul>
          </li>
          <li class="li">If the dialog is cancelled
            <ul class="ul">
              <li class="li">The <code class="ph codeph">StepMetaInterface</code> object must not be changed</li>
              <li class="li">The Changed flag of the <code class="ph codeph">StepMetaInterface</code> object must be set to the value it had at the time the dialog opened</li>
              <li class="li"><code class="ph codeph">open()</code> must return <code class="ph codeph">null</code></li>
            </ul>
          </li>
        </ul>
        <p class="p">The <code class="ph codeph">StepMetaInterface</code> object has an internal Changed flag that is accessible using <code class="ph codeph">hasChanged()</code> and <code class="ph codeph">setChanged()</code>. Spoon decides whether the transformation
          has unsaved changes based on the Changed flag, so it is important for the dialog to set the flag appropriately.&nbsp;</p>
        <p class="p">The
          <a class="xref" title="Sample Step Plugin" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0R0/0V0/010/Create_Step_Plugins/040">sample step plugin project</a>  has an implementation of the dialog class that is consistent with these rules and is a good basis for creating your own dialog. &nbsp;</p>
      </div>
      <div class="related-links">&nbsp;</div>
    </div>
  </body>
  <body target="toc"><em>No headers</em> </body>
</content>