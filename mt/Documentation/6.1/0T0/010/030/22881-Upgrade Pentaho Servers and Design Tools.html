<content type="text/html" title="Upgrade Pentaho Servers and Design Tools">
  <head>
    <link type="text/css" rel="stylesheet" href="http://help.pentaho.com/@cdn/deki/syntax2/out/shCore.min.css" />
    <link type="text/css" rel="stylesheet" href="http://help.pentaho.com/@cdn/deki/syntax2/out/shThemeCedar.min.css" />
    <script type="text/javascript" src="http://help.pentaho.com/@cdn/deki/syntax2/out/shCore.min.js"></script>
    <script type="text/javascript" src="http://help.pentaho.com/@cdn/deki/syntax2/out/shBrushPlain.min.js"></script>
    <script type="text/javascript">
      /*<![CDATA[*/
      SyntaxHighlighter.all(); /*]]>*/
    </script>
    <script type="text/javascript" src="http://help.pentaho.com/@cdn/deki/syntax2/out/shBrushXml.min.js"></script>
  </head>
  <body>
    <p>The upgrade&nbsp;process is similar&nbsp;whether you are upgrading&nbsp;the entire Pentaho Business Analytics (BA) suite or the Data Integration (DI) pieces only.</p>
    <div id="section_1" class="mt-page-section"><span id="Upgrade_the_Pentaho_Business_Analytics_Server"></span> 
      <h2 class="editable">Upgrade the Pentaho&nbsp;Business Analytics Server</h2>
      <p>After you finish the prerequisite&nbsp;tasks located in&nbsp;
        <a title="Documentation/6.1/0T0/010/020" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0T0/010/020">Prepare Your Pentaho&nbsp;Server&nbsp;for Upgrade</a>, there are a few&nbsp;tasks that you will need to complete in order to&nbsp;upgrade to Pentaho 6.1 successfully.</p>
      <p>These sections&nbsp;will guide you through the remaining steps of the Pentaho BA upgrade process:</p>
      <ul class="pentaho-list-unordered">
        <li>Backup Your BA Server Configuration and Solutions Files</li>
        <li>Install&nbsp;Pentaho Business&nbsp;Analytics 6.1</li>
        <li>Restore Your BA Server Configuration and Solutions Files
          <ul>
            <li>Enable Logging Before Restoring Files</li>
          </ul>
        </li>
        <li>Test Your BA Server</li>
        <li>Update&nbsp;Your Pentaho&nbsp;Client Tools</li>
      </ul>
      <div id="section_2" class="mt-page-section"><span id="Step_1:_Backup_Your_BA_Server_Configuration_and_Solutions_Files"></span> 
        <h3 class="editable">Step 1:&nbsp;Backup Your BA Server&nbsp;Configuration and Solutions Files</h3>
        <p>The backup&nbsp;utility copies&nbsp;your Pentaho configuration and solutions files, then stores the created&nbsp;<span class="filepath style-wrap">.zip</span>  files in your user's home directory. You will need to
          <a title="Documentation/6.1/0T0/010/030/Merge_Custom_Configuration_Settings_for_6.0"
          class="mt-disabled" rel="broken">merge&nbsp;your customizations</a>  if&nbsp;you have previously customized any&nbsp;of these things: <strong>server.xml</strong>, <strong>startup </strong> and <strong>shutdown scripts</strong>, or <strong>system listeners</strong> . We recommend
          making complete backups of your Quartz, Hibernate, and Jackrabbit databases before continuing with the upgrade process.</p>
        <ol class="pentaho-list-ordered">
          <li>Stop the
            <a title="Documentation/6.1/0H0/060/010/000" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0H0/060/010/000">BA Server</a> .</li>
          <li>Connect to the&nbsp;<span class="filepath style-wrap">cmd&nbsp;</span> line terminal for the BA Server.</li>
          <li>At the prompt, run the correct <span class="filepath style-wrap">BAServerConfigAndSolutionsBackup </span> utility for your operating system.</li>
        </ol>
        <p><strong>Optional:</strong>  You have the option of manually setting a version parameter here. If a valid version is not automatically found during back-up, the process will be aborted. You will then be prompted to provide the version information
          as an argument to the utility.</p>
        <table border="1" cellpadding="1" cellspacing="1" class="pentaho-table" style="width: 100%; table-layout: fixed;" title="Pentaho Table">
          <thead> </thead>
          <tbody>
            <tr>
              <td style="width: 258px;">
                <p><em><strong>Windows</strong> </em> </p>
              </td>
              <td style="width: 980px;"> <pre class="brush: plain; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; ">BAServerConfigAndSolutionsBackup &quot;C:\Program Files\pentaho\server\biserver-ee&quot;</pre> </td>
            </tr>
            <tr>
              <td style="width: 258px;">
                <p><em><strong>Linux</strong> </em> </p>
              </td>
              <td style="width: 980px;"> <pre class="brush: plain; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; ">./BAServerConfigAndSolutionsBackup.sh /opt/custom software/pentaho/server/biserver-ee</pre> </td>
            </tr>
          </tbody>
        </table>
        <p>The next step is to install a new instance of the&nbsp;Pentaho 6.1 software.&nbsp;</p>
      </div>
      <div id="section_3" class="mt-page-section"><span id="Step_2:_Install_Pentaho_Business_Analytics_6.1"></span> 
        <h3 class="editable">Step 2: Install&nbsp;Pentaho&nbsp;Business Analytics&nbsp;6.1</h3>
        <p>A new&nbsp;archive installation of the&nbsp;
          <a class="link-https" title="https://support.pentaho.com/hc/en-us" rel="external nofollow" href="https://support.pentaho.com/hc/en-us" target="_blank">Pentaho&nbsp;BA 6.1 package</a> &nbsp;is needed as part of&nbsp;the upgrade process, after you have finished the upgrade prerequisites and backed up your Pentaho&nbsp;BA&nbsp;configuration and solutions files.&nbsp; You'll need this in order
          to get all of the required&nbsp;
          <a title="Documentation/6.1/0C0" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0C0">updates</a> .</p>
        <p class="pentaho-note">Make sure to install the new instance of Pentaho on the same server.</p>
        <p>Next, do these tasks from the Prepare Your Environment section of the
          <a title="Prepare Environment" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0F0/0P0/020"> archive installation</a>  guides.&nbsp;Make sure that you leave&nbsp;your Pentaho&nbsp;5.x instance &quot;as is&quot; and unpack&nbsp;Pentaho 6.1 into a new directory.&nbsp;</p>
        <table border="1" cellpadding="1" cellspacing="1" class="pentaho-table"
        style="width: 100%; table-layout: fixed;" title="Pentaho Table">
          <tbody>
            <tr>
              <td style="width: 258px;">
                <p><em><strong>Windows</strong> </em> </p>
              </td>
              <td style="width: 980px;">
                <ul class="pentaho-list-unordered">
                  <li> <a title="Documentation/6.1/0F0/0P0/020/0A0#Install_Java" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0F0/0P0/020/0A0#Install_Java">Install Java&nbsp;</a>  </li>
                  <li> <a title="Documentation/6.1/0F0/0P0/020/0A0#Set_Environment_Variables" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0F0/0P0/020/0A0#Set_Environment_Variables">Set Environment Variables</a>  </li>
                </ul>
              </td>
            </tr>
            <tr>
              <td style="width: 258px;">
                <p><em><strong>Linux</strong> </em> </p>
              </td>
              <td style="width: 980px;">
                <ul class="pentaho-list-unordered">
                  <li> <a title="Documentation/6.1/0F0/0P0/020/0B0#Install_Java" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0F0/0P0/020/0B0#Install_Java">Install Java&nbsp;</a>  </li>
                  <li> <a title="Documentation/6.1/0F0/0P0/020/0B0#Set_Environment_Variables" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0F0/0P0/020/0B0#Set_Environment_Variables">Set Environment Variables</a>  </li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
        <p>If you are using custom port numbers and a custom fully-qualified URL, there are some updates for 6.1 that you should be aware of.
          <a title="Documentation/6.1/0P0/000/050#Change_the_Port_Numbers_for_the_BA_Server" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0P0/000/050#Change_the_Port_Numbers_for_the_BA_Server">Change the Port Numbers for the BA Server</a>  has information and steps for how to do both of these things in Pentaho 6.1.</p>
      </div>
      <div id="section_4" class="mt-page-section"><span id="Step_3:_Restore_Your_BA_Server_Configuration_and_Solutions_Files"></span> 
        <h3 class="editable">Step 3:&nbsp;Restore Your BA Server Configuration and Solutions Files</h3>
        <p>After you have unpacked your Pentaho&nbsp;6.1 bundle, restore your Pentaho files&nbsp;to your 6.1 instance using the restore utility tool.<span class="mt-color-ff0000">&nbsp;</span> </p>
        <p>If you do not wish to upload or replace your current sample data, it is recommended that you rename the files located in the <span class="filepath style-wrap">pentaho-solutions/system/default-content</span>  directory prior to restarting the server.
          These files may include <span class="filepath style-wrap">pentaho-operations-mart-etl</span>, <span class="filepath style-wrap">pentaho-operations-mart-operations</span>, <span class="filepath style-wrap">plugin-samples-zip</span>, and
          <span
          class="filepath style-wrap">samples-zip</span> .</p>
        <ol class="pentaho-list-ordered">
          <li>Open a <span class="filepath style-wrap">cmd&nbsp;</span> prompt on the BA Server host machine.</li>
          <li>In the prompt, run the <span class="filepath style-wrap">BAServerConfigAndSolutionsRestore&nbsp;</span> utility to restore your data from the&nbsp;.zip files located in your user&nbsp;home folder.&nbsp;
            <table border="1" cellpadding="1" cellspacing="1"
            class="pentaho-table" style="width: 100%; table-layout: fixed;" title="Pentaho Table">
              <thead> </thead>
              <tbody>
                <tr>
                  <td style="width: 244px;">
                    <p><em><strong>Windows</strong> </em> </p>
                  </td>
                  <td style="width: 966px;"> <pre class="brush: plain; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; ">BAServerConfigAndSolutionsRestore &quot;C:\Program Files\pentaho\server\biserver-ee&quot;</pre> </td>
                </tr>
                <tr>
                  <td style="width: 244px;">
                    <p><em><strong>Linux</strong> </em> </p>
                  </td>
                  <td style="width: 966px;"> <pre class="brush: plain; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; ">./BAServerConfigAndSolutionsRestore.sh /opt/home/pentaho/server/biserver-ee</pre> </td>
                </tr>
              </tbody>
            </table>
          </li>
        </ol>
        <p class="pentaho-note">If you are upgrading from Pentaho version 5.4 to 6.1, you must make the modifications specified in the
          <a title="Upgrade Pentaho Servers and Design Tools" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0T0/010/030#OSGi_Modifications_for_6.1">OSGi Modifications for 6.1</a>  section to enable OSGi before starting the BA Server.</p>
        <ol class="pentaho-list-ordered" start="3">
          <li>If you aren't going to enable logging before restoring files,
            <a title="Documentation/6.1/0H0/060/010/000" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0H0/060/010/000">&nbsp;start the BA&nbsp;Server</a> .&nbsp;</li>
        </ol>
        <p>Make sure not to interrupt the BA&nbsp;Server the first time you start it after restoring your data.</p>
        <div id="section_5" class="mt-page-section"><span id="Optional:_Enable_Logging_before_Restoring_Files"></span> 
          <h4 class="editable">Optional: Enable Logging before Restoring Files</h4>
          <p>Before you restore your BA Server configuration and solutions files, enable logging in the logging configuration file:</p>
          <ol class="pentaho-list-ordered">
            <li>Locate the<span class="filepath style-wrap"> /biserver-ee/tomcat/webapps/pentaho/WEB-INF/classes</span>  directory and open the<span class="filepath style-wrap"> log4j.xml</span>  file with any text editor.&nbsp;</li>
            <li>Find the parameter for <span class="filepath style-wrap">Threshold </span> and change the value as shown here:</li>
          </ol>
          <table border="1" cellpadding="1" cellspacing="1" class="pentaho-table" style="width: 100%; table-layout: fixed;" title="Pentaho Table">
            <tbody>
              <tr>
                <td style="width: 273px;"><strong>Old param value</strong> </td>
                <td style="width: 965px;"> <pre class="brush: xml; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; "><param name=&quot;Threshold&quot; value=&quot;ERROR&quot;/></pre> </td>
              </tr>
              <tr>
                <td style="width: 273px;"><strong>New param value</strong> </td>
                <td style="width: 965px;"> <pre class="brush: xml; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; "><param name=&quot;Threshold&quot; value=&quot;INFO&quot;/></pre> </td>
              </tr>
            </tbody>
          </table>
          <ol class="pentaho-list-ordered" start="3">
            <li>Add this category:</li>
          </ol> <pre class="brush: xml; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; "><category name=&quot;org.pentaho.platform.engine.core.system.status&quot;>
<priority value=&quot;INFO&quot;/>
</category></pre>
          <ol class="pentaho-list-ordered" start="4">
            <li>Save and close the <span class="filepath style-wrap">log4j.xml </span> file.</li>
            <li> <a title="Documentation/6.1/0H0/060/010/000" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0H0/060/010/000">Start the BA Server</a> .&nbsp; </li>
          </ol>
          <p>Make sure&nbsp;not to interrupt the BA Server the first time you start it after restoring your data.</p>
        </div>
      </div>
      <div id="section_6" class="mt-page-section"><span id="Step_4:_Test_Your_BA_Server"></span> 
        <h3 class="editable">Step 4: Test Your BA Server</h3>
        <p>The last thing that you will need to do before testing is to clear the cache from your web browser.</p>
        <p class="pentaho-note">While starting the BA Server, it initializes by installing all the Karaf features. The system waits for these features to be installed before timing out. The default wait&nbsp;befiore timing out is 2 minutes. If you modify any Karaf feature, you
          should consider&nbsp;
          <a title="https://pentaho-new.mindtouch.us/Documentation/6.1/0P0/000/050#Change_the_Karaf_Startup_Timeout_Setting" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0P0/000/050#Change_the_Karaf_Startup_Timeout_Setting">changing the&nbsp;Karaf startup timeout setting</a> .&nbsp;</p>
        <p><span style="line-height:1.5;">Here are some of the things that you might want to do&nbsp;to verify that your content has been restored to the BA Server:</span> </p>
        <ul class="pentaho-list-unordered">
          <li>Navigate to the your Pentaho&nbsp;URL&nbsp;and make sure the login screen appears.</li>
          <li>Log into PUC and verify that you can run your old BA content.</li>
          <li>Verify that your schedules exist and are working properly.</li>
          <li>Make sure that your&nbsp;Pentaho plugins are installed and functional:
            <ul>
              <li>Open a report that requires no user prompts and a parameterized report.</li>
              <li>Create a test report for Interactive Reporting and one for Analyzer, as appropriate.</li>
              <li>Open a dashboard in Dashboard Designer.</li>
              <li>Publish a report in Report Designer.</li>
              <li>Publish an analysis schema from Spoon.</li>
            </ul>
          </li>
          <li>Check your application server log.&nbsp;</li>
        </ul>
      </div>
      <div id="section_7" class="mt-page-section"><span id="Step_5:_Update_Your_Pentaho_BA_Design_Tools"></span> 
        <h3 class="editable">Step 5: Update Your&nbsp;Pentaho&nbsp;BA&nbsp;Design&nbsp;Tools</h3>
        <p>The Pentaho BA design tools are stand-alone tools&nbsp;and are easily updated on your workstations.&nbsp;Pentaho design tools can be found in the <span class="filepath style-wrap">Pentaho/design-tools</span>  directory.</p>
        <ol class="pentaho-list-ordered">
          <li> <a title="Documentation/6.1/0H0/060/020/000" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0H0/060/020/000">Stop the design tool</a>, if it is currently&nbsp;running. </li>
          <li>Move the old design tool out of the&nbsp;Pentaho&nbsp;folder structure to a temporary folder.</li>
          <li>Copy the new version of the design tool into the&nbsp;Pentaho&nbsp;folder structure.</li>
          <li>Restart your design tool.</li>
        </ol>
      </div>
    </div>
    <div id="section_8" class="mt-page-section"><span id="Upgrade_the_Pentaho_Data_Integration_Server"></span> 
      <h2 class="editable">Upgrade the&nbsp;Pentaho Data Integration Server</h2>
      <p>After you finish the prerequisite&nbsp;tasks located in&nbsp;
        <a href="/Documentation/6.1/0T0/010/020" rel="internal" title="Documentation/6.1/0T0/010/020">Prepare Your Pentaho&nbsp;Server&nbsp;for Upgrade</a>,&nbsp;there are a few&nbsp;tasks that you will need to complete in order to&nbsp;upgrade to Pentaho 6.1 successfully.</p>
      <p>These sections&nbsp;will guide you through the remaining steps of the Pentaho&nbsp;DI&nbsp;upgrade process:</p>
      <ul class="pentaho-list-unordered">
        <li>Backup Your DI Server Configuration and Solutions Files</li>
        <li>Install&nbsp;Pentaho&nbsp;Data Integration&nbsp;6.1&nbsp;</li>
        <li>Restore Your DI Server Configuration and Solutions Files
          <ul>
            <li>Optional Step:&nbsp;Enable Logging Before Restoring Files</li>
          </ul>
        </li>
        <li>Update&nbsp;Your Pentaho&nbsp;DI Client Tool</li>
        <li>Test Your DI Server</li>
      </ul>
      <div id="section_9" class="mt-page-section"><span id="Step_1:_Backup_Your_DI_Server_Configuration_and_Solutions_Files"></span> 
        <h3 class="editable">Step 1:&nbsp;Backup Your DI Server&nbsp;Configuration and Solutions Files</h3>
        <p>The backup&nbsp;utility copies&nbsp;your Pentaho configuration and solutions files, then stores the created&nbsp;<span class="filepath style-wrap">.zip</span> &nbsp;files in your user's home directory.&nbsp;You will need to
          <a title="https://pentaho-new.mindtouch.us/Documentation/6.1/0T0/010/030/Merge_Custom_Configuration_Settings"
          class="mt-disabled" rel="broken">merge&nbsp;your customizations</a>  if&nbsp;you have previously customized any&nbsp;of these things: <strong>server.xml</strong>, <strong>startup </strong> and <strong>shutdown scripts</strong>, or <strong>system listeners</strong> . We recommend
          making complete backups of your Quartz, Hibernate, and Jackrabbit databases before continuing with the upgrade process.</p>
        <ol class="pentaho-list-ordered">
          <li>Stop your
            <a title="Documentation/6.1/0H0/070/010/000" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0H0/070/010/000">DI Server</a> .</li>
          <li>Connect to the <span class="filepath style-wrap">cmd </span> line terminal for the DI Server.&nbsp;</li>
          <li>At the prompt, run the <span class="filepath style-wrap">DIServerConfigAndSolutionsBackup</span>  utility for your operating system.</li>
        </ol>
        <p><strong>Optional:</strong>  You have the option of manually setting a version parameter here.If a valid version is not automatically found during back-up, the process will be aborted. You will then be prompted to provide the version information
          as an argument to the utility.</p>
        <table border="1" cellpadding="1" cellspacing="1" class="pentaho-table" style="width: 100%; table-layout: fixed;" title="Pentaho Table">
          <thead> </thead>
          <tbody>
            <tr>
              <td style="width: 289px;">
                <p><em><strong>Windows</strong> </em> </p>
              </td>
              <td style="width: 949px;"> <pre class="brush: plain; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; ">DIServerConfigAndSolutionsBackup &quot;C:\Program Files\pentaho\server\data-integration-server&quot;</pre> </td>
            </tr>
            <tr>
              <td style="width: 289px;">
                <p><em><strong>Linux</strong> </em> </p>
              </td>
              <td style="width: 949px;"> <pre class="brush: plain; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; ">./DIServerConfigAndSolutionsBackup.sh /opt/custom software/pentaho/server/data-integration-server</pre> </td>
            </tr>
          </tbody>
        </table>
        <p>The next step is to install a new instance of Pentaho&nbsp;DI 6.1 software.</p>
      </div>
      <div id="section_10" class="mt-page-section"><span id="Step_2:_Install_Pentaho_Data_Integration_6.1"></span> 
        <h3 class="editable">Step 2:&nbsp;Install&nbsp;Pentaho Data Integration 6.1&nbsp;</h3>
        <p>A new archive installation of the&nbsp;
          <a class="link-https" title="https://support.pentaho.com/hc/en-us" rel="external nofollow" href="https://support.pentaho.com/hc/en-us" target="_blank">Pentaho&nbsp;DI&nbsp;6.1 package</a> &nbsp;is needed as part of&nbsp;the upgrade process, after you have finished the upgrade prerequisites and backed up your Pentaho&nbsp;DI configuration and solutions files.&nbsp; You'll need this in order
          to get all of the required&nbsp;
          <a title="Documentation/6.1/0C0" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0C0">updates</a> .</p>
        <p class="pentaho-note">Make sure to install the new instance of Pentaho on the same server.</p>
        <p>Next, do these tasks from the Prepare Your Environment section of the
          <a title="Prepare Your Environment" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0F0/0O0/030">archive installation</a>  guides.&nbsp;Make sure that you leave&nbsp;your Pentaho&nbsp;5.x or 6.0&nbsp; instance &quot;as is&quot; and unpack&nbsp;Pentaho 6.1 into a new directory.&nbsp;</p>
        <table border="1" cellpadding="1" cellspacing="1" class="pentaho-table"
        style="width: 100%; table-layout: fixed;" title="Pentaho Table">
          <tbody>
            <tr>
              <td style="width: 302px;">
                <p><em><strong>Windows</strong> </em> </p>
              </td>
              <td style="width: 936px;">
                <ul class="pentaho-list-unordered">
                  <li> <a title="Documentation/6.1/0F0/0O0/030/010#Install_Java" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0F0/0O0/030/010#Install_Java">Install Java&nbsp;</a>  </li>
                  <li> <a title="Documentation/6.1/0F0/0O0/030/010#Set_Environment_Variables" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0F0/0O0/030/010#Set_Environment_Variables">Set Environment Variables</a>  </li>
                </ul>
              </td>
            </tr>
            <tr>
              <td style="width: 302px;">
                <p><em><strong>Linux</strong> </em> </p>
              </td>
              <td style="width: 936px;">
                <ul class="pentaho-list-unordered">
                  <li> <a title="Documentation/6.1/0F0/0O0/030/020#Install_Java" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0F0/0O0/030/020#Install_Java">Install Java&nbsp;</a>  </li>
                  <li> <a title="Documentation/6.1/0F0/0O0/030/020#Set_Environment_Variables" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0F0/0O0/030/020#Set_Environment_Variables">Set Environment Variables</a>  </li>
                </ul>
              </td>
            </tr>
          </tbody>
        </table>
        <p><span>If you are using custom port numbers and a custom fully-qualified URL, there are some updates for 6.1 that you should be aware of. <a href="/Documentation/6.1/0P0/0U0/080#Change_the_DI_Server_URL" rel="internal" title="Documentation/6.1/0P0/0U0/080#Change_the_DI_Server_URL">Changing Ports and URLs</a>  has information and steps for how to do both of these things for the DI Server&nbsp;in Pentaho 6.1.</span> </p>
      </div>
      <div id="section_11" class="mt-page-section"><span id="Step_3:__Restore_Your_DI_Server_Configuration_and_Solutions_Files"></span> 
        <h3 class="editable">Step 3:&nbsp; Restore Your DI Server Configuration and Solutions Files</h3>
        <p>After you have unpacked your Pentaho&nbsp;6.1 bundle,&nbsp;restore your custom data to your 6.1 instance.&nbsp;</p>
        <ol class="pentaho-list-ordered">
          <li>Open a cmd&nbsp;prompt on the DI&nbsp;Server host machine.</li>
          <li>In the prompt, run the <span class="filepath style-wrap">DIServerConfigAndSolutionsRestore&nbsp;</span> utility to restore your data from the&nbsp;.zip files in your user&nbsp;home folder.&nbsp;
            <table border="1" cellpadding="1" cellspacing="1"
            class="pentaho-table" style="width: 100%; table-layout: fixed;" title="Pentaho Table">
              <thead> </thead>
              <tbody>
                <tr>
                  <td style="width: 283px;">
                    <p><em><strong>Windows</strong> </em> </p>
                  </td>
                  <td style="width: 927px;"> <pre class="brush: plain; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; ">DIServerConfigAndSolutionsRestore &quot;C:\Program Files\pentaho\server\data-integration-server&quot;</pre> </td>
                </tr>
                <tr>
                  <td style="width: 283px;">
                    <p><em><strong>Linux</strong> </em> </p>
                  </td>
                  <td style="width: 927px;"> <pre class="brush: plain; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; ">./DIServerConfigAndSolutionsRestore.sh /opt/custom software/pentaho/server/data-integration-server</pre> </td>
                </tr>
              </tbody>
            </table>
          </li>
        </ol>
        <p class="pentaho-note">If you are upgrading from Pentaho version 5.4 to 6.1, you must make the modifications specified in the
          <a title="Upgrade Pentaho Servers and Design Tools" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0T0/010/030#OSGi_Modifications_for_6.1">OSGi Modifications for 6.1</a>  section to enable OSGi before starting the BA Server.</p>
        <ol class="pentaho-list-ordered" start="3">
          <li>If you aren't going to enable logging before restoring files,
            <a title="Documentation/6.1/0H0/070/010/000" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0H0/070/010/000">start the DI Server</a> .&nbsp;</li>
        </ol>
        <p>Make sure not to interrupt the DI Server the first time you start it after restoring your data.</p>
        <div id="section_12" class="mt-page-section"><span id="Optional:_Enable_Logging_before_Restoring_Files_2"></span> 
          <h4 class="editable">Optional:&nbsp;Enable Logging before Restoring Files</h4>
          <p>Before you restore your DI&nbsp;Server configuration and solutions files, enable logging in the logging configuration file:</p>
          <ol class="pentaho-list-ordered">
            <li>Locate the<span class="filepath style-wrap"> /data-integration-server/tomcat/webapps/pentaho-di/WEB-INF/classes</span>  directory and open the<span class="filepath style-wrap"> log4j.xml</span>  file with any text editor.&nbsp;</li>
            <li>Find the parameter for <span class="filepath style-wrap">Threshold </span> and change the value as shown here:</li>
          </ol>
          <table border="1" cellpadding="1" cellspacing="1" class="pentaho-table" style="width: 100%; table-layout: fixed;" title="Pentaho Table">
            <tbody>
              <tr>
                <td style="width: 320px;"><strong>Old param value</strong> </td>
                <td style="width: 918px;"> <pre class="brush: xml; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; "><param name=&quot;Threshold&quot; value=&quot;ERROR&quot;/></pre> </td>
              </tr>
              <tr>
                <td style="width: 320px;"><strong>New param value</strong> </td>
                <td style="width: 918px;"> <pre class="brush: xml; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; "><param name=&quot;Threshold&quot; value=&quot;INFO&quot;/></pre> </td>
              </tr>
            </tbody>
          </table>
          <ol class="pentaho-list-ordered" start="3">
            <li>Add this category:</li>
          </ol> <pre class="brush: xml; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; "><category name=&quot;org.pentaho.platform.engine.core.system.status&quot;>
<priority value=&quot;INFO&quot;/>
</category></pre>
          <ol class="pentaho-list-ordered" start="4">
            <li>Save and close the <span class="filepath style-wrap">log4j.xml </span> file.</li>
            <li> <a title="Documentation/6.1/0H0/070/010/000" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0H0/070/010/000">Start the DI Server</a> . </li>
          </ol>
          <p>Make sure not to interrupt the DI Server the first time you start it after restoring your data.</p>
        </div>
      </div>
      <div id="section_13" class="mt-page-section"><span id="Step_4:_Update_Your_Pentaho_DI_Client_Tool"></span> 
        <h3 class="editable">Step 4:&nbsp;Update Your&nbsp;Pentaho DI&nbsp;Client&nbsp;Tool</h3>
        <p>The Pentaho DI&nbsp;client&nbsp;tool, Spoon, is&nbsp;easily updated on your workstations.</p>
        <ol class="pentaho-list-ordered">
          <li> <a title="Documentation/6.1/0H0/070/020/000" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0H0/070/020/000">Stop Spoon</a>, if it is currently&nbsp;running. </li>
          <li>Move the old design tool out of the&nbsp;Pentaho&nbsp;folder structure to a temporary folder.</li>
          <li>Copy the new version of the design tool into the&nbsp;Pentaho&nbsp;folder structure.</li>
          <li>Restart your design tool.</li>
        </ol>
      </div>
      <div id="section_14" class="mt-page-section"><span id="Step_5:_Test_Your_New_DI_Server"></span> 
        <h3 class="editable">Step 5:&nbsp;Test Your New DI Server</h3>
        <p class="p">The last thing that you will need to do before testing is to clear the cache from your web browser.&nbsp;Pentaho design tools can be found in the <span class="filepath style-wrap">Pentaho/design-tools</span>  directory.</p>
        <p class="pentaho-note">While starting the&nbsp;DI Server, it initializes by installing all the Karaf features. The system waits for these features to be installed before timing out. The default wait&nbsp;before timing out is 2 minutes. If you modify any Karaf feature,
          you should consider&nbsp;
          <a title="https://pentaho-new.mindtouch.us/Documentation/6.1/0P0/000/050#Change_the_Karaf_Startup_Timeout_Setting" rel="internal" href="http://help.pentaho.com/Documentation/6.1/0P0/000/050#Change_the_Karaf_Startup_Timeout_Setting">
            <u>
              <font color="#0066cc">changing the Karaf startup timeout setting</font>
            </u>
          </a> .</p>
        <p>Make sure that the DI Server and Spoon are running, then use this list to verify that your content has been restored to the DI Server.</p>
        <ul class="ul">
          <li class="li">Open old jobs and transformations and ensure that they execute properly.</li>
          <li class="li">Create a new job, transformation, and/or Agile BI analysis schema and save it as you normally would.</li>
          <li class="li">Schedule a job or transformation and ensure that the schedule executes properly.</li>
          <li class="li">Ensure that existing schedules are still valid.</li>
          <li class="li">If you are using an enterprise repository, share a job or transformation between PDI users and verify that both can access it.</li>
          <li class="li">Physically restart the server and ensure that the DI Server are automatically started as services.</li>
        </ul>
      </div>
    </div>
    <div id="section_15" class="mt-page-section"><span id="OSGi_Modifications_for_6.1"></span> 
      <h2 class="editable">OSGi Modifications for 6.1</h2>
      <p>&nbsp;If you are upgrading from Pentaho version 5.4 to 6.1, you must make the following modifications to enable OSGi:</p>
      <ol>
        <li>Locate the&nbsp;<code> pentaho-solutions/system/pentahoObjects</code> folder and open the <code>spring.xml</code> file with any text editor.</li>
        <li>Find the bean element and change the value as shown here:</li>
      </ol>
      <table border="1" cellpadding="1" cellspacing="1" class="pentaho-table" style="table-layout: fixed; width: 100%;" title="Pentaho Table">
        <tbody>
          <tr>
            <td style="width: 116px;">Old value</td>
            <td style="width: 1120px;"><code><bean id=&quot;IPluginManager&quot; class=&quot;org.pentaho.platform.plugin.services.pluginmgr.DefaultPluginManager&quot; scope=&quot;singleton&quot;/></code></td>
          </tr>
          <tr>
            <td style="width: 116px;">New value</td>
            <td style="width: 1120px;">
              <p><code><bean id=&quot;IPluginManager&quot; class=&quot;org.pentaho.platform.plugin.services.pluginmgr.PentahoSystemPluginManager&quot; scope=&quot;singleton&quot;/></code></p>
            </td>
          </tr>
        </tbody>
      </table>
      <ol start="3">
        <li>Save and close the file.</li>
        <li>Locate the <code>tomcat/webapps/pentaho/WEB-INF</code> folder and open the <code>web.xml</code> file with any text editor.</li>
        <li>Find the comment <code>
<!-- insert additional servlets --></code> and replace it with the following code:</li>
      </ol> <pre class="brush: xml; collapse: false; first-line: 1; gutter: true; ruler: false; toolbar: true; wrap-lines: true; "><servlet>
    <servlet-name>proxy</servlet-name>
    <servlet-class>org.apache.felix.http.proxy.ProxyServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<!-- insert additional servlets -->
<servlet-mapping>
    <servlet-name>proxy</servlet-name>
    <url-pattern>/osgi/*</url-pattern>
</servlet-mapping></pre>
      <ol start="6">
        <li>Save and close the file.</li>
      </ol>
    </div>
  </body>
  <body target="toc">
    <ol>
      <li>
        <a href="#Upgrade_the_Pentaho_Business_Analytics_Server" rel="internal">Upgrade the Pentaho&nbsp;Business Analytics Server</a> 
        <ol>
          <li> <a href="#Step_1:_Backup_Your_BA_Server_Configuration_and_Solutions_Files" rel="internal">Step 1:&nbsp;Backup Your BA Server&nbsp;Configuration and Solutions Files</a>  </li>
          <li> <a href="#Step_2:_Install_Pentaho_Business_Analytics_6.1" rel="internal">Step 2: Install&nbsp;Pentaho&nbsp;Business Analytics&nbsp;6.1</a>  </li>
          <li>
            <a href="#Step_3:_Restore_Your_BA_Server_Configuration_and_Solutions_Files" rel="internal">Step 3:&nbsp;Restore Your BA Server Configuration and Solutions Files</a> 
            <ol>
              <li> <a href="#Optional:_Enable_Logging_before_Restoring_Files" rel="internal">Optional: Enable Logging before Restoring Files</a>  </li>
            </ol>
          </li>
          <li> <a href="#Step_4:_Test_Your_BA_Server" rel="internal">Step 4: Test Your BA Server</a>  </li>
          <li> <a href="#Step_5:_Update_Your_Pentaho_BA_Design_Tools" rel="internal">Step 5: Update Your&nbsp;Pentaho&nbsp;BA&nbsp;Design&nbsp;Tools</a>  </li>
        </ol>
      </li>
      <li>
        <a href="#Upgrade_the_Pentaho_Data_Integration_Server" rel="internal">Upgrade the&nbsp;Pentaho Data Integration Server</a> 
        <ol>
          <li> <a href="#Step_1:_Backup_Your_DI_Server_Configuration_and_Solutions_Files" rel="internal">Step 1:&nbsp;Backup Your DI Server&nbsp;Configuration and Solutions Files</a>  </li>
          <li> <a href="#Step_2:_Install_Pentaho_Data_Integration_6.1" rel="internal">Step 2:&nbsp;Install&nbsp;Pentaho Data Integration 6.1&nbsp;</a>  </li>
          <li>
            <a href="#Step_3:__Restore_Your_DI_Server_Configuration_and_Solutions_Files" rel="internal">Step 3:&nbsp; Restore Your DI Server Configuration and Solutions Files</a> 
            <ol>
              <li> <a href="#Optional:_Enable_Logging_before_Restoring_Files_2" rel="internal">Optional:&nbsp;Enable Logging before Restoring Files</a>  </li>
            </ol>
          </li>
          <li> <a href="#Step_4:_Update_Your_Pentaho_DI_Client_Tool" rel="internal">Step 4:&nbsp;Update Your&nbsp;Pentaho DI&nbsp;Client&nbsp;Tool</a>  </li>
          <li> <a href="#Step_5:_Test_Your_New_DI_Server" rel="internal">Step 5:&nbsp;Test Your New DI Server</a>  </li>
        </ol>
      </li>
      <li> <a href="#OSGi_Modifications_for_6.1" rel="internal">OSGi Modifications for 6.1</a>  </li>
    </ol>
  </body>
</content>